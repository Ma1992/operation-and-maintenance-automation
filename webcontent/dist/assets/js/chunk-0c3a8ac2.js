(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c3a8ac2","chunk-2d0aa9b6","chunk-081d6fe4"],{"03ff":function(t,a,e){"use strict";var s=e("ee40"),o=e.n(s);o.a},"07ac":function(t,a,e){var s=e("23e7"),o=e("6f53").values;s({target:"Object",stat:!0},{values:function(t){return o(t)}})},1276:function(t,a,e){"use strict";var s=e("d784"),o=e("44e7"),r=e("825a"),n=e("1d80"),i=e("4840"),l=e("8aa5"),c=e("50c4"),d=e("14c3"),p=e("9263"),u=e("d039"),m=[].push,h=Math.min,f=4294967295,_=!u((function(){return!RegExp(f,"y")}));s("split",2,(function(t,a,e){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var s=String(n(this)),r=void 0===e?f:e>>>0;if(0===r)return[];if(void 0===t)return[s];if(!o(t))return a.call(s,t,r);var i,l,c,d=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,_=new RegExp(t.source,u+"g");while(i=p.call(_,s)){if(l=_.lastIndex,l>h&&(d.push(s.slice(h,i.index)),i.length>1&&i.index<s.length&&m.apply(d,i.slice(1)),c=i[0].length,h=l,d.length>=r))break;_.lastIndex===i.index&&_.lastIndex++}return h===s.length?!c&&_.test("")||d.push(""):d.push(s.slice(h)),d.length>r?d.slice(0,r):d}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,e){var o=n(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,o,e):s.call(String(o),a,e)},function(t,o){var n=e(s,t,this,o,s!==a);if(n.done)return n.value;var p=r(t),u=String(this),m=i(p,RegExp),g=p.unicode,v=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(_?"y":"g"),y=new m(_?p:"^(?:"+p.source+")",v),w=void 0===o?f:o>>>0;if(0===w)return[];if(0===u.length)return null===d(y,u)?[u]:[];var b=0,C=0,k=[];while(C<u.length){y.lastIndex=_?C:0;var x,S=d(y,_?u:u.slice(C));if(null===S||(x=h(c(y.lastIndex+(_?0:C)),u.length))===b)C=l(u,C,g);else{if(k.push(u.slice(b,C)),k.length===w)return k;for(var N=1;N<=S.length-1;N++)if(k.push(S[N]),k.length===w)return k;C=b=x}}return k.push(u.slice(b)),k}]}),!_)},"159b":function(t,a,e){var s=e("da84"),o=e("fdbc"),r=e("17c2"),n=e("9112");for(var i in o){var l=s[i],c=l&&l.prototype;if(c&&c.forEach!==r)try{n(c,"forEach",r)}catch(d){c.forEach=r}}},"344a":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"charts",staticClass:"echart_container",attrs:{id:t.id}})},o=[],r=(e("ac1f"),e("1276"),{name:"lineCharts",props:{id:{type:String,default:""},data:{type:Object,default:null}},watch:{data:{handler:function(t){this.initOption(t)},deep:!0}},mounted:function(){null==this.data&&""==this.id||this.initOption(this.data)},created:function(){},methods:{initOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(t.legendData,t.xAxisData),e=void 0===a?[]:a,s=t.seriesData,o=void 0===s?[]:s,r=t.animation,n=void 0===r||r,i=document.getElementById(this.id),l=this.$echarts.init(i),c={tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(0, 255, 233,0)"},{offset:.5,color:"rgba(255, 255, 255,1)"},{offset:1,color:"rgba(0, 255, 233,0)"}],global:!1}}}},grid:{top:"15%",left:"5%",right:"7%",bottom:"8%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e,axisLabel:{textStyle:{color:"#fff"},formatter:function(t){return t.split(" ")[0]+"\n"+t.split(" ")[1]}}},yAxis:[{type:"value",min:0,splitNumber:4,splitLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.1)"}},axisLine:{show:!0,lineStyle:{color:"#bcccc8"}},axisLabel:{show:!0,margin:20,textStyle:{color:"#d1e6eb"}},axisTick:{show:!0}}],dataZoom:[{show:!0,height:12,xAxisIndex:[0],bottom:"2%",start:0,end:100,handleSize:"100%",handleStyle:{color:"#d3dee5"},textStyle:{color:"#fff"},borderColor:"#90979c"},{type:"inside",show:!0,height:15,start:1,end:35}],series:o,animation:n};l.clear(),l.setOption(c,!0),setTimeout((function(){window.addEventListener("resize",(function(){l.resize()}))}),200)},chartssize:function(t,a){function e(t,a){return window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle}e(t,"width").width;var s=e(t,"height").height;a.style.height=s}}}),n=r,i=(e("b7d5"),e("2877")),l=Object(i["a"])(n,s,o,!1,null,"8ec94908",null);a["default"]=l.exports},"393b":function(t,a,e){},"4d63":function(t,a,e){var s=e("83ab"),o=e("da84"),r=e("94ca"),n=e("7156"),i=e("9bf2").f,l=e("241c").f,c=e("44e7"),d=e("ad6d"),p=e("9f7f"),u=e("6eeb"),m=e("d039"),h=e("69f3").set,f=e("2626"),_=e("b622"),g=_("match"),v=o.RegExp,y=v.prototype,w=/a/g,b=/a/g,C=new v(w)!==w,k=p.UNSUPPORTED_Y,x=s&&r("RegExp",!C||k||m((function(){return b[g]=!1,v(w)!=w||v(b)==b||"/a/i"!=v(w,"i")})));if(x){var S=function(t,a){var e,s=this instanceof S,o=c(t),r=void 0===a;if(!s&&o&&t.constructor===S&&r)return t;C?o&&!r&&(t=t.source):t instanceof S&&(r&&(a=d.call(t)),t=t.source),k&&(e=!!a&&a.indexOf("y")>-1,e&&(a=a.replace(/y/g,"")));var i=n(C?new v(t,a):v(t,a),s?this:y,S);return k&&e&&h(i,{sticky:e}),i},N=function(t){t in S||i(S,t,{configurable:!0,get:function(){return v[t]},set:function(a){v[t]=a}})},D=l(v),O=0;while(D.length>O)N(D[O++]);y.constructor=S,S.prototype=y,u(o,"RegExp",S)}f("RegExp")},"4ddb":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"main_view",attrs:{id:"torpBox_test"}}),e("div",{staticClass:"l000_mask"},[t._m(0),e("div",{staticClass:"l000_win"},[e("h5",[t._v("链接信息")]),e("span",{staticClass:"l000_win000_close"},[t._v("+")]),e("ul",{staticClass:"l000_link000_info",attrs:{id:"l000_link000_info"}},[e("li",[e("el-row",[e("el-col",{attrs:{span:5}},[t._v("链接关系：")]),e("el-col",{attrs:{span:19}},[e("el-row",[e("span",{staticClass:"select_value_label"},[t._v("本端:")]),e("select",{staticClass:"select_value",staticStyle:{width:"90%"}})]),e("el-row",[e("span",{staticClass:"after_value_label"},[t._v("对端:")]),e("span",{staticClass:"after_value"})])],1)],1)],1),e("li",[e("el-row",[t._v(" 连接状态："),e("span",{staticClass:"connection_status"},[t._v("正常")])])],1),e("li",[e("el-row",[t._v("链路带宽："),e("span",{staticClass:"link_bandwidth"},[t._v("50Mb")])])],1),e("li",[e("el-row",[t._v(" 链路聚合："),e("span",{staticClass:"source_if_port_channel"})])],1),e("li",[e("el-row",[t._v("链路使用率："),e("span",{staticClass:"link_used"},[t._v("50Mb")])])],1),e("li",[e("el-row",[t._v("IP："),e("span",{staticClass:"source_if_ip"})])],1)])])])])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"l000_win_device"},[e("h5",[t._v("设备信息")]),e("span",{staticClass:"l000_win000_close"},[t._v("+")]),e("ul",{staticClass:"l000_mach000_info",attrs:{id:"l000_mach000_info"}},[e("li",[t._v("设备ID："),e("span",{attrs:{id:"machId2"}})]),e("li",[t._v("设备型号："),e("span",{attrs:{id:"machType2"}})]),e("li",[t._v("设备类型："),e("span",{attrs:{id:"machTypeName2"}})]),e("li",[t._v("设备IP："),e("span",{attrs:{id:"machIp2"}})])]),e("div",{staticClass:"l000_btnBox"},[e("a",{staticClass:"btn_control",attrs:{href:"javascript:;"}},[t._v("设备监控")]),e("a",{staticClass:"btn_manage",attrs:{href:"javascript:;"}},[t._v("设备管理")])])])}],r=(e("4160"),e("4d63"),e("ac1f"),e("25f0"),e("5319"),e("1276"),e("9911"),e("159b"),{name:"Physicstopology",data:function(){return{webResData:null,webDataFromRequest:{},vcenterInfo:[],deviceid:"",all_data_init:null}},mounted:function(){this.getMapList()},methods:{getTorpData:function(t){var a=this,e=this,s={nodes:[],links:[],lines:[],text:[]};return t.topology[0].node.forEach((function(t,a){var o=5;s.nodes.push({id:"l000_torp000_"+t["node-id"],x:110*(a%o+.4),y:120*(Math.floor(a/o)+.5),name:t["node-id"],background_id:t["device-type"]+(t["devicegroup-type"]?"_G":""),background:e.getBkgd(t["device-type"],t["devicegroup-type"]),otherClassName:t["devicegroup-type"],diy_attr:{},oraData:t})})),t.topology[0].link.forEach((function(t,e){void 0===t["bandwidth"]&&(t["bandwidth"]=""),s.links.push({id:"1000_line000_"+(new Date).getTime()+e,name:"",source:"l000_right000_"+t.source["source-node"]+"000_"+e,target:"l000_left000_"+t.destination["dest-node"]+"000_"+e,color:"Connected"===t.status?"#03b1f4":"#ff5e50",isDash:!1,arrowType:t.arrowType,diy_attr:{"link-id":t["link-id"],all_data:a.webResData,bandwidth:t["bandwidth"],"bandwidth-used":t["bandwidth-used"],status:t["status"],all_data_init:a.all_data_init}})})),s},getBkgd:function(t,a){return"defualt"!==t?"FW"===t?"stack"===a?"url('../../../assets/img/fw2.png')":"url('../../../assets/img/fw_to.png')":"Router"===t?"stack"===a?"url('../../../assets/img/router_tolo.png')":"url('../../../assets/img/router_to_tolo.png')":"Switch"===t?"stack"===a?"url('../../../assets/img/switch2.png')":"url('../../../assets/img/switch_to.png')":"stack"===a?"url('../../../assets/img/unknow.png')":"url('../../../assets/img/unknow_to.png')":"stack"===a?"url('../../../assets/img/topological/switch2.png')":void 0},getMapList:function(){var t=this;this.$http.get("phy_topo/hlw_node_topo",{headers:{token:localStorage.getItem("token"),responseType:"arraybuffer","Content-Type":"application/json;charset=UTF-8",Accept:"application/json;charset=UTF-8"}}).then((function(a){if(null!=a.data)if(0===a.data.msgcode){t.all_data_init=JSON.parse(JSON.stringify(a.data.data)),t.webDataFromRequest=JSON.parse(JSON.stringify(a.data.data));for(var e=0;e<t.webDataFromRequest.topology[0].node.length;e++){var s=t.webDataFromRequest.topology[0].node[e];Object.prototype.hasOwnProperty.call(s,"device-family")||(t.webDataFromRequest.topology[0].node[e]["device-family"]="defualt.000000"),Object.prototype.hasOwnProperty.call(s,"devicegroup-type")||(t.webDataFromRequest.topology[0].node[e]["devicegroup-type"]="defualt"),Object.prototype.hasOwnProperty.call(s,"device-type")||(t.webDataFromRequest.topology[0].node[e]["device-type"]="defualt"),Object.prototype.hasOwnProperty.call(s,"connection-type")||(t.webDataFromRequest.topology[0].node[e]["connection-type"]="defualt"),Object.prototype.hasOwnProperty.call(s,"host")||(t.webDataFromRequest.topology[0].node[e]["host"]="0.0.0.0"),Object.prototype.hasOwnProperty.call(s,"status")||(t.webDataFromRequest.topology[0].node[e]["status"]="defualt")}t.webDataFromRequest.topology[0].node.forEach((function(t){var a=new RegExp("\\.","g");t["node-id"]=t["node-id"].replace(a,"-");var e=new RegExp(":","g");t["node-id"]=t["node-id"].replace(e,"-")})),t.webDataFromRequest.topology[0].link.forEach((function(t){var a=new RegExp("\\.","g");t.source["source-node"]=t.source["source-node"].replace(a,"-"),t.destination["dest-node"]=t.destination["dest-node"].replace(a,"-");var e=new RegExp(":","g");t.source["source-node"]=t.source["source-node"].replace(e,"-"),t.destination["dest-node"]=t.destination["dest-node"].replace(e,"-")})),t.webResData=t.webDataFromRequest;var o=t,r=new TopologyMap2({mainBoxId:"torpBox_test",canvasId:"canvas_2",couldEdit:!1,onlyDrag:!0,leftViewShow:!1,rightViewShow:!1});r.setTorpData(o.getTorpData(o.webResData)),$(".l000_torp000_element").on("click",(function(){if($(this).attr("data-win")){var t=JSON.parse($(this).attr("data-win"));$("#machId2").text(t.machId),"undefined()"===t.machType?$("#machType2").text(""):$("#machType2").text(t.machType),$("#machTypeName2").text(t.machTypeName),"0.0.0.0"===t.host?$("#machIp2").text(""):$("#machIp2").text(t.host);var a=window.document.location.href,e=a.split("#");"FW"==t.machTypeName||"Switch"==t.machTypeName||"Router"==t.machTypeName?$(".btn_manage").attr("href",e[0]+"#/asset/network").attr("target","_blank").css({"background-color":"#409EFF"}).attr("disabled",!1):$(".btn_manage").css({"background-color":"#ccc"}).attr("disabled",!0),"unknow"==t.machTypeName||""==t.host?$(".btn_control").css({"background-color":"#ccc"}).attr("disabled",!0):("FW"==t.machTypeName&&$(".btn_control").attr("href",e[0]+"#/monitor/h3cfireWall_visualize?ip="+t.host+"&device_type="+t.machTypeName+"&name="+t.machId).attr("target","_blank").css({"background-color":"#409EFF"}).attr("disabled",!1),"Switch"!=t.machTypeName&&"Router"!=t.machTypeName||(console.log(t.host),$(".btn_control").attr("href",e[0]+"#/monitor/network_visualize?ip="+t.host+"&device_type="+t.machTypeName+"&name="+t.machId).attr("target","_blank"),$(".btn_control").css({"background-color":"#409EFF"}).attr("disabled",!1))),$(".l000_win").hide(),$(".l000_win_device").show()}})),$(".l000_win000_close").on("click",(function(){$(".l000_mask").hide()}))}else t.$message.warning(a.data.msg)})).catch((function(a){t.$message.error(JSON.stringify(a.response.data))}))}}}),n=r,i=(e("c2c2"),e("2877")),l=Object(i["a"])(n,s,o,!1,null,null,null);a["default"]=l.exports},"6f53":function(t,a,e){var s=e("83ab"),o=e("df75"),r=e("fc6a"),n=e("d1e7").f,i=function(t){return function(a){var e,i=r(a),l=o(i),c=l.length,d=0,p=[];while(c>d)e=l[d++],s&&!n.call(i,e)||p.push(t?[e,i[e]]:i[e]);return p}};t.exports={entries:i(!0),values:i(!1)}},7156:function(t,a,e){var s=e("861d"),o=e("d2bb");t.exports=function(t,a,e){var r,n;return o&&"function"==typeof(r=a.constructor)&&r!==e&&s(n=r.prototype)&&n!==e.prototype&&o(t,n),t}},"857a":function(t,a,e){var s=e("1d80"),o=/"/g;t.exports=function(t,a,e,r){var n=String(s(t)),i="<"+a;return""!==e&&(i+=" "+e+'="'+String(r).replace(o,"&quot;")+'"'),i+">"+n+"</"+a+">"}},"8eeb":function(t,a,e){},9911:function(t,a,e){"use strict";var s=e("23e7"),o=e("857a"),r=e("af03");s({target:"String",proto:!0,forced:r("link")},{link:function(t){return o(this,"a","href",t)}})},a112:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"brand-container"},[e("el-container",{staticClass:"wrap"},[e("el-header",{staticClass:"head"},[e("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[e("el-col",{attrs:{span:8}}),e("el-col",{attrs:{span:8}},[e("h2",[t._v("IT基础设施统一监控")])]),e("el-col",{attrs:{span:8}},[e("el-dropdown",{staticClass:"sys"},[e("span",{staticClass:"el-dropdown-link sys-dropdown"}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:"/#/sys",push:2}},[t._v(" 系统管理 ")])],1),e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:"/#/asset",push:2}},[t._v(" 资产管理 ")])],1),e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:"/#/monitor"}},[t._v(" 集中监控管理平台 ")])],1),e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:"/#/automation"}},[t._v(" 自动化运维 ")])],1),e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:this.globalAPI.elkUrl,target:"_blank"}},[t._v(" 日志监控分析 ")])],1),"admin"===this.username?e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:this.globalAPI.nroUrl,target:"_blank"}},[t._v(" 网络编排 ")])],1):t._e(),e("el-dropdown-item",[e("el-link",{attrs:{type:"primary",href:"/#/login"}},[t._v(" 退出登录 ")])],1)],1)],1)],1)],1)],1),e("el-main",{staticClass:"mainbox"},[e("p",{staticClass:"title_p mb10"},[t._v("| 各类资产的数量统计")]),e("el-row",{staticClass:"resume"},[e("div",{staticClass:"resume-bd mb10"},[e("el-row",[e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"physical mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.physicalServeNum))]),e("dd",[t._v("物理服务器")])])]),e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"virtual mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.virtualServerNum))]),e("dd",[t._v("虚拟服务器")])])]),e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"storage mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.storageNum))]),e("dd",[t._v("存储")])])]),e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"router mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.routerNum))]),e("dd",[t._v("路由器")])])])],1),e("el-row",{staticClass:"mt10"},[e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"firewall mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.firewallNum))]),e("dd",[t._v("防火墙")])])]),e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"switch mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.switchNum))]),e("dd",[t._v("交换机")])])]),e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"database mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.databaseNum))]),e("dd",[t._v("数据库")])])]),e("el-col",{staticClass:"center",attrs:{span:6}},[e("i",{staticClass:"middle mlr10"}),e("dl",{staticClass:"top_font_10"},[e("dt",{staticClass:"time"},[t._v(t._s(t.middlewareNum))]),e("dd",[t._v("中间件")])])])],1)],1)]),e("el-row",{staticClass:"mt10"},[e("el-col",{attrs:{span:7}},[e("div",{staticClass:"panel mr10"},[e("p",{staticClass:"title_p mt10 ml10"},[t._v("cpuTOP3")]),e("div",{staticClass:"chartdDiv"},[e("lineEcharts",{staticClass:"ech_height",attrs:{id:"cpuTopn",data:t.cpuData}})],1)]),e("div",{staticClass:"panel mr10 mt10"},[e("p",{staticClass:"title_p mt10 ml10"},[t._v("内存TOP3")]),e("lineEcharts",{staticClass:"ech_height",attrs:{id:"memTopn",data:t.memData}})],1)]),e("el-col",{attrs:{span:11}},[e("div",{staticClass:"app-main"},[e("el-tabs",{attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"广域网"}},[e("topologyWeb")],1),e("el-tab-pane",{attrs:{label:"互联网"}},[e("topology")],1)],1)],1)]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"panel ml10 botm_right"},[e("p",{staticClass:"title_p mt10 ml10 mb10"},[t._v("告警")]),e("div",{staticClass:"mt10"},[e("el-row",{staticClass:"mt10"},[e("el-col",{staticClass:"center",attrs:{span:5}},[e("dl",[e("dt",{staticClass:"white"},[t._v("提示")]),e("dd",{staticClass:"time hint"},[t._v(" "+t._s(t.hintNum)+" ")])])]),e("el-col",{staticClass:"center",attrs:{span:5}},[e("dl",[e("dt",{staticClass:"white"},[t._v("报警")]),e("dd",{staticClass:"time orange"},[t._v(t._s(t.reportNum)+" ")])])]),e("el-col",{staticClass:"center",attrs:{span:5}},[e("dl",[e("dt",{staticClass:"white"},[t._v("重要")]),e("dd",{staticClass:"time reds"},[t._v(" "+t._s(t.importNum)+" ")])])]),e("el-col",{staticClass:"center",attrs:{span:5}},[e("dl",[e("dt",{staticClass:"white"},[t._v("严重")]),e("dd",{staticClass:"time yellow"},[t._v(t._s(t.badlyNum)+" ")])])]),e("el-col",{staticClass:"center",attrs:{span:4}},[e("dl",[e("dt",{staticClass:"white"},[t._v("紧急")]),e("dd",{staticClass:"time red"},[t._v(t._s(t.urgencyNum)+" ")])])])],1),e("div",{staticClass:"warnDiv"},[e("ul",t._l(t.warnData,(function(a,s){return e("li",{key:s,class:a.iconClass},[e("p",[t._v(t._s(a.info))]),e("p",{staticClass:"warn_time_p"},[t._v(t._s(a.time))])])})),0)])],1)])])],1)],1)],1)],1)},o=[],r=(e("99af"),e("d81d"),e("b0c0"),e("b64b"),e("07ac"),e("344a")),n=e("a333"),i=e("4ddb"),l={name:"Brand",components:{lineEcharts:r["default"],topology:n["default"],topologyWeb:i["default"]},data:function(){return{cpuData:{lengedData:"",xAxisData:[],seriesData:[],animation:!0},memData:{lengedData:"",xAxisData:[],seriesData:[],animation:!0},physicalServeNum:0,virtualServerNum:0,storageNum:0,firewallNum:0,switchNum:0,databaseNum:0,middlewareNum:0,routerNum:0,warnData:[],importNum:0,urgencyNum:0,hintNum:0,reportNum:0,badlyNum:0,timer:null}},computed:{username:function(){var t=localStorage.getItem("username");return t||this.name}},created:function(){},mounted:function(){var t=this;this.initQueryData(),this.timer=setInterval((function(){t.cpuData.animation=!1,t.memData.animation=!1,t.initQueryData()}),6e4)},methods:{initQueryData:function(){var t=this;this.$http.get("monitor/api/middleware/count",{headers:{token:localStorage.getItem("token")}}).then((function(a){null!=a.data&&(t.databaseNum=a.data.database_count[0].value,t.middlewareNum=a.data.middleware_count[0].value)})).catch((function(a){t.$message.error(JSON.stringify(a.response.data))})),this.$http.get("asset/api/device/visualization",{headers:{token:localStorage.getItem("token")}}).then((function(a){null!=a.data&&(0!=a.data.server_data.length&&a.data.server_data.map((function(a){"服务器"==a.device_type?t.physicalServeNum=a.device_type__count:"虚拟服务器"==a.device_type&&(t.virtualServerNum=a.device_type__count)})),0!=a.data.asset_info.length&&a.data.asset_info.map((function(a){"防火墙"==a.device_type?t.firewallNum=a.device_type__count:"路由器"==a.device_type?t.routerNum=a.device_type__count:"交换机"==a.device_type?t.switchNum=a.device_type__count:"存储"==a.device_type&&(t.storageNum=a.device_type__count)})))})).catch((function(a){t.$message.error(JSON.stringify(a.response.data))})),this.$http.get("monitor/api/alarm_detail/alarm_count",{headers:{token:localStorage.getItem("token")}}).then((function(a){null!=a.data&&(void 0==a.data.remain_alarm_detail&&0==a.data.remain_alarm_detail.length||a.data.level_count.map((function(a){"5"==a.name?t.urgencyNum=a.value:"4"==a.name?t.badlyNum=a.value:"3"==a.name?t.importNum=a.value:"2"==a.name?t.reportNum=a.value:"1"==a.name&&(t.hintNum=a.value)})),void 0==a.data.remain_alarm_detail&&0==a.data.remain_alarm_detail.length||(t.warnData=a.data.remain_alarm_detail.map((function(t){var a={};a.info="".concat(t.server_type).concat(t.alarm_ip,"发生").concat(t.alarm_level,"告警"),a.time=t.alarm_last_time;var e="提示"==t.alarm_level?"hint_icon":"报警"==t.alarm_level?"warn_icon":"重要"==t.alarm_level?"import_icon":"严重"==t.alarm_level?"badly_icon":"urgency_icon";return a.iconClass=e,a}))))})).catch((function(a){console.log(a),t.$message.error(JSON.stringify(a.response.data))})),this.$http.get("monitor/api/analysis/history/?m=CPU_PERCENT",{headers:{token:localStorage.getItem("token")}}).then((function(a){if(null!=a.data||0!=a.data.length){var e=[];a.data.map((function(t){return e.push(t.name)})),t.cpuData.lengedData=e;var s=a.data[0].data,o=Object.keys(s),r=o.map((function(a){return t.Format(1e3*a)}));t.cpuData.xAxisData=r,t.cpuData.seriesData=[{name:a.data[0].name,type:"line",symbol:"circle",symbolSize:10,label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},itemStyle:{color:"#00ca95",borderColor:"#fff",borderWidth:3,shadowColor:"rgba(0, 0, 0, .3)",shadowBlur:0,shadowOffsetY:2,shadowOffsetX:2},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0,202,149,0.3)"},{offset:1,color:"rgba(0,202,149,0)"}],!1),shadowColor:"rgba(0,202,149,0.9)",shadowBlur:20}},data:Object.values(a.data[0].data)},{name:a.data[1].name,type:"line",symbol:"circle",symbolSize:10,label:{show:!0,position:"top",textStyle:{color:"orange"}},itemStyle:{color:"#ef8101",borderColor:"#fff",borderWidth:3,shadowColor:"rgba(0, 0, 0, .3)",shadowBlur:0,shadowOffsetY:2,shadowOffsetX:2},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(239,129,1,0.3)"},{offset:1,color:"rgba(239,129,1,0)"}],!1),shadowColor:"rgba(239,129,1,0.9)",shadowBlur:20}},data:Object.values(a.data[1].data)},{name:a.data[2].name,type:"line",symbol:"circle",symbolSize:10,label:{show:!0,position:"top",textStyle:{color:"#orange"}},itemStyle:{color:"#6c50f3",borderColor:"#fff",borderWidth:3,shadowColor:"rgba(0, 0, 0, .3)",shadowBlur:0,shadowOffsetY:2,shadowOffsetX:2},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(108,80,243,0.3)"},{offset:1,color:"rgba(108,80,243,0)"}],!1),shadowColor:"rgba(108,80,243,0.9)",shadowBlur:20}},data:Object.values(a.data[2].data)}]}})).catch((function(a){t.$message.error(JSON.stringify(a.response.data))})),this.$http.get("monitor/api/analysis/history/?m=MEM_PERCENT",{headers:{token:localStorage.getItem("token")}}).then((function(a){if(null!=a.data||0!=a.data.length){var e=[];a.data.map((function(t){return e.push(t.name)})),t.memData.lengedData=e;var s=a.data[0].data,o=Object.keys(s),r=o.map((function(a){return t.Format(1e3*a)}));t.memData.xAxisData=r,t.memData.seriesData=[{name:a.data[0].name,type:"line",symbol:"circle",symbolSize:10,label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},itemStyle:{color:"#00ca95",borderColor:"#fff",borderWidth:3,shadowColor:"rgba(0, 0, 0, .3)",shadowBlur:0,shadowOffsetY:2,shadowOffsetX:2},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0,202,149,0.3)"},{offset:1,color:"rgba(0,202,149,0)"}],!1),shadowColor:"rgba(0,202,149,0.9)",shadowBlur:20}},data:Object.values(a.data[0].data)},{name:a.data[1].name,type:"line",symbol:"circle",symbolSize:10,label:{show:!0,position:"top",textStyle:{color:"#orange"}},itemStyle:{color:"#ef8101",borderColor:"#fff",borderWidth:3,shadowColor:"rgba(0, 0, 0, .3)",shadowBlur:0,shadowOffsetY:2,shadowOffsetX:2},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(239,129,1,0.3)"},{offset:1,color:"rgba(239,129,1,0)"}],!1),shadowColor:"rgba(239,129,1,0.9)",shadowBlur:20}},data:Object.values(a.data[1].data)},{name:a.data[2].name,type:"line",symbol:"circle",symbolSize:10,label:{show:!0,position:"top",textStyle:{color:"#orange"}},itemStyle:{color:"#6c50f3",borderColor:"#fff",borderWidth:3,shadowColor:"rgba(0, 0, 0, .3)",shadowBlur:0,shadowOffsetY:2,shadowOffsetX:2},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(108,80,243,0.3)"},{offset:1,color:"rgba(108,80,243,0)"}],!1),shadowColor:"rgba(108,80,243,0.9)",shadowBlur:20}},data:Object.values(a.data[2].data)}]}})).catch((function(a){t.$message.error(JSON.stringify(a.response.data))}))},Format:function(t){var a=new Date(t),e=a.getFullYear(),s=a.getMonth()+1;s=s<10?"0"+s:s;var o=a.getDate();o=o<10?"0"+o:o;var r=a.getHours();r=r<10?"0"+r:r;var n=a.getMinutes();n=n<10?"0"+n:n;var i=a.getSeconds();return i=i<10?"0"+i:i,e+"-"+s+"-"+o+" "+r+":"+n+":"+i}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null}},c=l,d=(e("03ff"),e("2877")),p=Object(d["a"])(c,s,o,!1,null,"26f67861",null);a["default"]=p.exports},a333:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"main_view",attrs:{id:"torpBox"}}),e("div",{staticClass:"l000_mask"},[t._m(0),e("div",{staticClass:"l000_win"},[e("h5",[t._v("链接信息")]),e("span",{staticClass:"l000_win000_close"},[t._v("+")]),e("ul",{staticClass:"l000_link000_info",attrs:{id:"l000_link000_info"}},[e("li",[e("el-row",[e("el-col",{attrs:{span:5}},[t._v("链接关系：")]),e("el-col",{attrs:{span:19}},[e("el-row",[e("span",{staticClass:"select_value_label"},[t._v("本端:")]),e("select",{staticClass:"select_value",staticStyle:{width:"90%"}})]),e("el-row",[e("span",{staticClass:"after_value_label"},[t._v("对端:")]),e("span",{staticClass:"after_value"})])],1)],1)],1),e("li",[e("el-row",[t._v(" 连接状态："),e("span",{staticClass:"connection_status"},[t._v("正常")])])],1),e("li",[e("el-row",[t._v("链路带宽："),e("span",{staticClass:"link_bandwidth"},[t._v("50Mb")])])],1),e("li",[e("el-row",[t._v(" 链路聚合："),e("span",{staticClass:"source_if_port_channel"})])],1),e("li",[e("el-row",[t._v("链路使用率："),e("span",{staticClass:"link_used"},[t._v("50Mb")])])],1),e("li",[e("el-row",[t._v("IP："),e("span",{staticClass:"source_if_ip"})])],1)])])])])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"l000_win_device"},[e("h5",[t._v("设备信息")]),e("span",{staticClass:"l000_win000_close"},[t._v("+")]),e("ul",{staticClass:"l000_mach000_info",attrs:{id:"l000_mach000_info"}},[e("li",[t._v("设备ID："),e("span",{attrs:{id:"machId"}})]),e("li",[t._v("设备型号："),e("span",{attrs:{id:"machType"}})]),e("li",[t._v("设备类型："),e("span",{attrs:{id:"machTypeName"}})]),e("li",[t._v("设备IP："),e("span",{attrs:{id:"machIp"}})])]),e("div",{staticClass:"l000_btnBox"},[e("a",{staticClass:"btn_control",attrs:{href:"javascript:;"}},[t._v("设备监控")]),e("a",{staticClass:"btn_manage",attrs:{href:"javascript:;"}},[t._v("设备管理")])])])}],r=(e("4160"),e("4d63"),e("ac1f"),e("25f0"),e("5319"),e("1276"),e("9911"),e("159b"),{name:"Physicstopology",data:function(){return{resData:null,dataFromRequest:{},vcenterInfo:[],deviceid:"",all_data_init:null}},mounted:function(){this.getMapList()},methods:{getTorpData:function(t){var a=this,e=this,s={nodes:[],links:[],lines:[],text:[]};return t.topology[0].node.forEach((function(t,a){var o=5;s.nodes.push({id:"l000_torp000_"+t["node-id"],x:110*(a%o+.4),y:120*(Math.floor(a/o)+.5),name:t["node-id"],background_id:t["device-type"]+(t["devicegroup-type"]?"_G":""),background:e.getBkgd(t["device-type"],t["devicegroup-type"]),otherClassName:t["devicegroup-type"],diy_attr:{},oraData:t})})),t.topology[0].link.forEach((function(t,e){void 0===t["bandwidth"]&&(t["bandwidth"]=""),s.links.push({id:"l000_line000_"+(new Date).getTime()+e,name:"",source:"l000_right000_"+t.source["source-node"]+"000_"+e,target:"l000_left000_"+t.destination["dest-node"]+"000_"+e,color:"Connected"===t.status?"#03b1f4":"#ff5e50",isDash:!1,arrowType:t.arrowType,diy_attr:{"link-id":t["link-id"],all_data:a.resData,bandwidth:t["bandwidth"],"bandwidth-used":t["bandwidth-used"],status:t["status"],all_data_init:a.all_data_init}})})),s},getBkgd:function(t,a){return"defualt"!==t?"FW"===t?"stack"===a?"url('../../../assets/img/fw2.png')":"url('../../../assets/img/fw_to.png')":"Router"===t?"stack"===a?"url('../../../assets/img/router_tolo.png')":"url('../../../assets/img/router_to_tolo.png')":"Switch"===t?"stack"===a?"url('../../../assets/img/switch2.png')":"url('../../../assets/img/switch_to.png')":"stack"===a?"url('../../../assets/img/unknow.png')":"url('../../../assets/img/unknow_to.png')":"stack"===a?"url('../../../assets/img/topological/switch2.png')":void 0},getMapList:function(){var t=this;this.$http.get("phy_topo/link_topo",{headers:{token:localStorage.getItem("token"),responseType:"arraybuffer","Content-Type":"application/json;charset=UTF-8",Accept:"application/json;charset=UTF-8"}}).then((function(a){if(null!=a.data)if(0===a.data.msgcode){t.all_data_init=JSON.parse(JSON.stringify(a.data.data)),t.dataFromRequest=JSON.parse(JSON.stringify(a.data.data));for(var e=0;e<t.dataFromRequest.topology[0].node.length;e++){var s=t.dataFromRequest.topology[0].node[e];Object.prototype.hasOwnProperty.call(s,"device-family")||(t.dataFromRequest.topology[0].node[e]["device-family"]="defualt.000000"),Object.prototype.hasOwnProperty.call(s,"devicegroup-type")||(t.dataFromRequest.topology[0].node[e]["devicegroup-type"]="defualt"),Object.prototype.hasOwnProperty.call(s,"device-type")||(t.dataFromRequest.topology[0].node[e]["device-type"]="defualt"),Object.prototype.hasOwnProperty.call(s,"connection-type")||(t.dataFromRequest.topology[0].node[e]["connection-type"]="defualt"),Object.prototype.hasOwnProperty.call(s,"host")||(t.dataFromRequest.topology[0].node[e]["host"]="0.0.0.0"),Object.prototype.hasOwnProperty.call(s,"status")||(t.dataFromRequest.topology[0].node[e]["status"]="defualt")}t.dataFromRequest.topology[0].node.forEach((function(t){var a=new RegExp("\\.","g");t["node-id"]=t["node-id"].replace(a,"-");var e=new RegExp(":","g");t["node-id"]=t["node-id"].replace(e,"-")})),t.dataFromRequest.topology[0].link.forEach((function(t){var a=new RegExp("\\.","g");t.source["source-node"]=t.source["source-node"].replace(a,"-"),t.destination["dest-node"]=t.destination["dest-node"].replace(a,"-");var e=new RegExp(":","g");t.source["source-node"]=t.source["source-node"].replace(e,"-"),t.destination["dest-node"]=t.destination["dest-node"].replace(e,"-")})),t.resData=t.dataFromRequest;var o=t,r=new TopologyMap({mainBoxId:"torpBox",canvasId:"canvas_1",couldEdit:!1,onlyDrag:!0,leftViewShow:!1,rightViewShow:!1});console.log(o.getTorpData(o.resData)),r.setTorpData(o.getTorpData(o.resData)),$(".l000_torp000_element").on("click",(function(){if($(this).attr("data-win")){var t=JSON.parse($(this).attr("data-win"));$("#machId").text(t.machId),"undefined()"===t.machType?$("#machType").text(""):$("#machType").text(t.machType),$("#machTypeName").text(t.machTypeName),"0.0.0.0"===t.host?$("#machIp").text(""):$("#machIp").text(t.host);var a=window.document.location.href,e=a.split("#");"FW"==t.machTypeName||"Switch"==t.machTypeName||"Router"==t.machTypeName?$(".btn_manage").attr("href",e[0]+"#/asset/network").attr("target","_blank").css({"background-color":"#409EFF"}).attr("disabled",!1):$(".btn_manage").css({"background-color":"#ccc"}).attr("disabled",!0),"unknow"==t.machTypeName||""==t.host?$(".btn_control").css({"background-color":"#ccc"}).attr("disabled",!0):("FW"==t.machTypeName&&$(".btn_control").attr("href",e[0]+"#/monitor/h3cfireWall_visualize?ip="+t.host+"&device_type="+t.machTypeName+"&name="+t.machId).attr("target","_blank").css({"background-color":"#409EFF"}).attr("disabled",!1),"Switch"!=t.machTypeName&&"Router"!=t.machTypeName||($(".btn_control").attr("href",e[0]+"#/monitor/network_visualize?ip="+t.host+"&device_type="+t.machTypeName+"&name="+t.machId).attr("target","_blank"),$(".btn_control").css({"background-color":"#409EFF"}).attr("disabled",!1))),$(".l000_win").hide(),$(".l000_win_device").show()}})),$(".l000_win000_close").on("click",(function(){$(".l000_mask").hide()}))}else t.$message.warning(a.data.msg)})).catch((function(a){console.log(a),t.$message.error(JSON.stringify(a.response.data))}))}}}),n=r,i=(e("ffee"),e("2877")),l=Object(i["a"])(n,s,o,!1,null,null,null);a["default"]=l.exports},af03:function(t,a,e){var s=e("d039");t.exports=function(t){return s((function(){var a=""[t]('"');return a!==a.toLowerCase()||a.split('"').length>3}))}},b64b:function(t,a,e){var s=e("23e7"),o=e("7b0b"),r=e("df75"),n=e("d039"),i=n((function(){r(1)}));s({target:"Object",stat:!0,forced:i},{keys:function(t){return r(o(t))}})},b7d5:function(t,a,e){"use strict";var s=e("8eeb"),o=e.n(s);o.a},c2c2:function(t,a,e){"use strict";var s=e("393b"),o=e.n(s);o.a},d81d:function(t,a,e){"use strict";var s=e("23e7"),o=e("b727").map,r=e("1dde"),n=e("ae40"),i=r("map"),l=n("map");s({target:"Array",proto:!0,forced:!i||!l},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},da1e:function(t,a,e){},ee40:function(t,a,e){},ffee:function(t,a,e){"use strict";var s=e("da1e"),o=e.n(s);o.a}}]);