(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a055d99","chunk-2d0aa9b6"],{1276:function(t,e,a){"use strict";var o=a("d784"),s=a("44e7"),r=a("825a"),i=a("1d80"),n=a("4840"),l=a("8aa5"),c=a("50c4"),d=a("14c3"),p=a("9263"),h=a("d039"),u=[].push,m=Math.min,f=4294967295,v=!h((function(){return!RegExp(f,"y")}));o("split",2,(function(t,e,a){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var o=String(i(this)),r=void 0===a?f:a>>>0;if(0===r)return[];if(void 0===t)return[o];if(!s(t))return e.call(o,t,r);var n,l,c,d=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,v=new RegExp(t.source,h+"g");while(n=p.call(v,o)){if(l=v.lastIndex,l>m&&(d.push(o.slice(m,n.index)),n.length>1&&n.index<o.length&&u.apply(d,n.slice(1)),c=n[0].length,m=l,d.length>=r))break;v.lastIndex===n.index&&v.lastIndex++}return m===o.length?!c&&v.test("")||d.push(""):d.push(o.slice(m)),d.length>r?d.slice(0,r):d}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var s=i(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,s,a):o.call(String(s),e,a)},function(t,s){var i=a(o,t,this,s,o!==e);if(i.done)return i.value;var p=r(t),h=String(this),u=n(p,RegExp),g=p.unicode,w=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(v?"y":"g"),y=new u(v?p:"^(?:"+p.source+")",w),_=void 0===s?f:s>>>0;if(0===_)return[];if(0===h.length)return null===d(y,h)?[h]:[];var b=0,S=0,k=[];while(S<h.length){y.lastIndex=v?S:0;var I,D=d(y,v?h:h.slice(S));if(null===D||(I=m(c(y.lastIndex+(v?0:S)),h.length))===b)S=l(h,S,g);else{if(k.push(h.slice(b,S)),k.length===_)return k;for(var C=1;C<=D.length-1;C++)if(k.push(D[C]),k.length===_)return k;S=b=I}}return k.push(h.slice(b)),k}]}),!v)},"1da9":function(t,e,a){"use strict";var o=a("455c"),s=a.n(o);s.a},"20f3":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"wrapper"},[a("el-row",{staticClass:"mlr10 mt10",attrs:{span:24}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"mb10"},[a("el-row",{staticClass:"serve_select"},[a("el-form",{ref:"form",attrs:{"label-width":"70px"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"IP","label-width":"50px"}},[a("el-select",{staticClass:"select_width",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入IP","remote-method":t.remoteMethod},on:{change:t.changeIp},model:{value:t.networkIp,callback:function(e){t.networkIp=e},expression:"networkIp"}},t._l(t.optionsNetworkIp,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ipaddr,value:t.ipaddr+"/"+t.hostname}})})),1)],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"起止日期"}},[a("el-date-picker",{staticClass:"date_width",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.changeIp},model:{value:t.networkTime,callback:function(e){t.networkTime=e},expression:"networkTime"}},[t._v(" > ")])],1)],1)],1)],1),a("el-row",{staticClass:"mb10"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"network_top_top"},[a("div",[a("dl",{staticClass:"top_font_10 mlr10 "},[a("dt",{staticClass:"time"},[t._v(t._s(t.IP))]),a("dd",[t._v("IP")])])])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"network_top_top mlr10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.serviceType))]),a("dd",[t._v("网络设备类型")])])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"network_top_top ml10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.vendorName))]),a("dd",[t._v("厂商")])])])])],1),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.isShowName,expression:"isShowName"}],attrs:{span:12}},[a("div",{staticClass:"network_top_top"},[a("div",[a("dl",{staticClass:"top_font_10 mlr10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.deviceName))]),a("dd",[t._v("设备名称")])])])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"network_top_top  ml10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.seriesName))]),a("dd",[t._v("系列名称")])])])])],1)],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"network_top ml10 mb10"},[a("el-table",{staticClass:"table-content",attrs:{data:t.portStatusData,border:"",height:"200px"}},[a("el-table-column",{attrs:{prop:"name",label:"端口名称",align:"center"}}),a("el-table-column",{attrs:{prop:"value",label:"端口状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.value?"up":"down"))]}}])})],1)],1)])],1),a("el-row",{staticClass:"serve_center"},[a("el-row",{staticClass:"network_cpu",attrs:{span:24}},t._l(t.optionsData,(function(t,e){return a("el-col",{key:e,staticClass:"chart-item-area",attrs:{span:8}},[a("cpuUtilization",{staticClass:"cpuHeight",attrs:{data:t,id:"charts"+e,index:e}})],1)})),1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"btnRow"},[a("el-button",{staticClass:"btnMore",on:{click:t.getEchartsPage}},[t._v("更多")])],1)],1)],1)])},s=[],r=(a("99af"),a("d81d"),a("ac1f"),a("1276"),a("500e")),i={name:"ViewNetwork",components:{cpuUtilization:r["default"]},data:function(){return{timer:null,chartList:[],optionsData:[],memValue:"",memFreeValue:"",networkIp:"",serviceType:"",seriesName:0,vendorName:"",hwAvgDuty5min:"",hwAvgDuty1min:"",hwCpuDevDuty:"",networkTime:[],portStatusData:[],portTotal:0,loading:!1,optionsNetworkIp:[],ipList:[],loadingMore:!1,isScroll:!0,pageIndex:1,pageSize:10,list:[],IP:"",isShowName:!0,deviceName:"BD-2",echartsPage:1,showMore:!1,ifDescR:[],size:15}},computed:{},created:function(){this.networkTime=[this.Format(new Date-432e5),this.Format(new Date)]},mounted:function(){var t=this,e=decodeURIComponent(window.document.location.href),a=e.split("?");if(void 0==a[1])this.queryOneIp();else{var o=a[1].split("&"),s=o[0].split("="),r=o[2].split("=");this.networkIp=s[1],this.IP=s[1],console.log(this.networkIp),this.deviceName=r[1];var i=Date.parse(this.networkTime[1])/1e3,n=Date.parse(this.networkTime[0])/1e3;this.optionsData=[],this.serveHistory(n,i)}this.timer=setInterval((function(){t.changeIp()}),3e5)},methods:{queryOneIp:function(){var t=this;this.$http.get("asset/api/nro/network/?type=FW&current_page=1&pre_page=1&is_monitor=是",{headers:{token:localStorage.getItem("token")}}).then((function(e){t.IP=e.data.data[0].ipaddr,t.networkIp=e.data.data[0].ipaddr,t.deviceName=e.data.data[0].hostname;var a=Date.parse(t.networkTime[1])/1e3,o=Date.parse(t.networkTime[0])/1e3;t.optionsData=[],t.serveHistory(o,a)})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},remoteMethod:function(t){var e=this;""!==t?this.$http.get("asset/api/nro/network/network?device_type=FW&query=".concat(t,"&is_monitor=是"),{headers:{token:localStorage.getItem("token")}}).then((function(t){e.optionsNetworkIp=[],e.optionsNetworkIp=t.data.map((function(t){return t}))})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))})):this.optionsNetworkIp=[]},getEchartsPage:function(){this.echartsPage++,this.echartsPage*this.size>=this.portTotal&&(this.showMore=!1),console.log(this.echartsPage);var t=Date.parse(this.networkTime[1])/1e3,e=Date.parse(this.networkTime[0])/1e3;this.getEchartsData(e,t,this.size)},serveHistory:function(t,e){var a=this;this.$http.get("monitor/api/network_monitor/monitor/?network_name=FIREWALL_".concat(this.networkIp,"_").concat(this.deviceName),{headers:{token:this.token}}).then((function(o){var s=o.data;for(var r in a.IP=s.SYSUPTIME.ip,a.serviceType=s.SYSUPTIME.serviceType,a.seriesName=s.SYSUPTIME.seriesName,a.vendorName=s.SYSUPTIME.vendorName,a.portStatusData=[],s.PORT_STATUS)a.portStatusData.push({name:r.substring(14),value:s.PORT_STATUS[r]});a.portTotal=s.IFDESCR.length,a.ifDescR=s.IFDESCR,s.IFDESCR.length<=a.size?a.getEchartsData(t,e,s.IFDESCR.length):(a.getEchartsData(t,e,a.size),a.showMore=!0)})).catch((function(t){console.log(t),a.$message.error(JSON.stringify(t.response.data))}))},getEchartsData:function(t,e,a){for(var o=this,s=function(a){var s={};s.title=o.ifDescR[a],s.legendData=["入口流量","出口流量","入口丢包率","出口丢包率"];var r="IFOUTOCTETS_"+o.ifDescR[a],i="IFINOCTETS_"+o.ifDescR[a],n="IFINDISCARDS_"+o.ifDescR[a],l="IFOUTDISCARDS_"+o.ifDescR[a];o.$http.get("monitor/api/network_monitor/history/?start="+t+"&end="+e+"&m="+r+","+i+","+n+","+l+"&logic_ip="+o.networkIp,{headers:{token:o.token}}).then((function(t){if(Object.prototype.hasOwnProperty.call(t.data,"time")){var e=t.data.time,a=e.map((function(t){return o.Format(1e3*t)}));s.xAxisData=a,s.seriesData=[{name:"入口流量",type:"line",smooth:!0,symbol:"circle",symbolSize:3,lineStyle:{normal:{color:"#f0c725"}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(204,199,37, 0.8)"},{offset:.8,color:"rgba(204,199,37, 0)"}],global:!1},shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10},itemStyle:{normal:{color:"#f0c725",borderColor:"#f0c725"}},data:t.data[i]},{name:"出口流量",type:"line",smooth:!0,symbol:"circle",symbolSize:3,lineStyle:{normal:{color:"#16f892"}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(22,248,146, 0.8)"},{offset:.8,color:"rgba(22,248,146, 0)"}],global:!1},shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10},itemStyle:{normal:{color:"#16f892",borderColor:"#16f892"}},data:t.data[r]},{name:"入口丢包率",type:"line",smooth:!0,symbol:"circle",symbolSize:3,lineStyle:{normal:{color:"#ff99e4"}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255,153,288, 0.8)"},{offset:.8,color:"rgba(255,153,288, 0)"}],global:!1},shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10},itemStyle:{normal:{color:"#ff99e4",borderColor:"#ff99e4"}},data:t.data[n]},{name:"出口丢包率",type:"line",smooth:!0,symbol:"circle",symbolSize:3,lineStyle:{normal:{color:"#9e8cff"}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(158,140,255, 0.8)"},{offset:.8,color:"rgba(158,140,255, 0)"}],global:!1},shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10},itemStyle:{normal:{color:"#9e8cff",borderColor:"#9e8cff"}},data:t.data[l]}],o.optionsData.push(s),o.optionsData.sort((function(t,e){var a=t.title.split("_"),o=e.title.split("_");return a[1]-o[1]}))}})).catch((function(t){o.$message.error(JSON.stringify(t.response.data))}))},r=(this.echartsPage-1)*a;r<this.echartsPage*a;r++)s(r)},changeIp:function(){2==this.networkIp.split("/").length&&(this.deviceName=this.networkIp.split("/")[1]),this.networkIp=this.networkIp.split("/")[0],this.optionsData=[],this.showMore=!1;var t=Date.parse(this.networkTime[1])/1e3,e=Date.parse(this.networkTime[0])/1e3;this.serveHistory(e,t)},changeType:function(){this.networkIp="",this.deviceName="",this.queryOneIp(),this.optionsData=[]},Format:function(t){var e=new Date(t),a=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var s=e.getDate();s=s<10?"0"+s:s;var r=e.getHours();r=r<10?"0"+r:r;var i=e.getMinutes();i=i<10?"0"+i:i;var n=e.getSeconds();return n=n<10?"0"+n:n,a+"-"+o+"-"+s+" "+r+":"+i+":"+n}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null}},n=i,l=(a("1da9"),a("2877")),c=Object(l["a"])(n,o,s,!1,null,"d524cabe",null);e["default"]=c.exports},"455c":function(t,e,a){},"500e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"data",staticClass:"echart_container",attrs:{id:t.id}})},s=[],r=(a("ac1f"),a("1276"),{name:"utilizationCharts",props:{id:{type:String,default:""},data:{type:Object,default:null}},watch:{data:{handler:function(t){this.initOption(t)},deep:!0}},mounted:function(){null==this.data&&""==this.id||this.initOption(this.data)},created:function(){},methods:{initOption:function(t){var e=t.title,a=void 0===e?"":e,o=t.legendData,s=void 0===o?[]:o,r=t.xAxisData,i=void 0===r?[]:r,n=t.seriesData,l=void 0===n?[]:n,c=t.animation,d=void 0===c||c,p=this.$echarts.init(document.getElementById(this.id)),h={title:{text:a,left:"5%",top:"3%",bottom:"5%",textStyle:{fontFamily:"monospace",color:"#0dd1ec",fontSize:"14"}},tooltip:{trigger:"axis"},legend:{show:!0,itemHeight:5,itemWidth:24,data:s,textStyle:{color:"#B4B4B4"},top:"0%",left:"30%"},grid:{top:"19%",left:"4%",right:"10%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:i,axisLabel:{textStyle:{color:"#fff"},formatter:function(t){return t.split(" ")[0]+"\n"+t.split(" ")[1]}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",textStyle:{color:"#fff"}},splitLine:{lineStyle:{type:"dashed",color:"#5a637f"}},axisLine:{lineStyle:{color:"#5a637f"}},axisTick:{show:!1},minorTick:{show:!1}},dataZoom:[{show:!0,height:12,xAxisIndex:[0],bottom:"2%",start:80,end:100,handleSize:"100%",handleStyle:{color:"#d3dee5"},textStyle:{color:"#fff"},borderColor:"#90979c"},{type:"inside",show:!0,height:15,start:1,end:35}],series:l,animation:d};p.setOption(h,!0),setTimeout((function(){window.addEventListener("resize",(function(){p.resize()}))}),200)}}}),i=r,n=(a("a71e"),a("2877")),l=Object(n["a"])(i,o,s,!1,null,"9d5d30ea",null);e["default"]=l.exports},a101:function(t,e,a){},a71e:function(t,e,a){"use strict";var o=a("a101"),s=a.n(o);s.a},d81d:function(t,e,a){"use strict";var o=a("23e7"),s=a("b727").map,r=a("1dde"),i=a("ae40"),n=r("map"),l=i("map");o({target:"Array",proto:!0,forced:!n||!l},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);