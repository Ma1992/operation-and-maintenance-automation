(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3743974"],{5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var s=a("1d80"),r=a("5899"),l="["+r+"]",n=RegExp("^"+l+l+"*"),o=RegExp(l+l+"*$"),i=function(e){return function(t){var a=String(s(t));return 1&e&&(a=a.replace(n,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:i(1),end:i(2),trim:i(3)}},7156:function(e,t,a){var s=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var l,n;return r&&"function"==typeof(l=t.constructor)&&l!==a&&s(n=l.prototype)&&n!==a.prototype&&r(e,n),e}},"98ef":function(e,t,a){},a229:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 虚拟服务器 ")])],1)],1),a("div",{staticClass:"container"},[a("el-form",{attrs:{inline:!0},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}},[a("el-row",{staticClass:"margin_bot"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[a("el-col",[a("el-button",{staticClass:"handle-box",attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(t){return e.handleAdd()}}},[e._v("增加 ")]),a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.exportData}},[e._v("导出Excel ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"mr10",attrs:{type:"info",plain:""},on:{click:e.exportTemplate}},[e._v("下载模版 ")])],1),a("el-col",{attrs:{span:18}},[a("el-upload",{ref:"uploadExcel",staticClass:"upload-demo inlineB",attrs:{action:e.uploadUrl,headers:e.headers,limit:1,"auto-upload":!1,"on-success":e.uploadSuccess,"on-error":e.handleError}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"warning",plain:""},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",plain:""},on:{click:e.importExcel}},[e._v("上传到服务器")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"ip"},model:{value:e.searchData.virtual_ip,callback:function(t){e.$set(e.searchData,"virtual_ip",t)},expression:"searchData.virtual_ip"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"名称"},model:{value:e.searchData.hostname,callback:function(t){e.$set(e.searchData,"hostname",t)},expression:"searchData.hostname"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"状态"},model:{value:e.searchData.status,callback:function(t){e.$set(e.searchData,"status",t)},expression:"searchData.status"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型",clearable:""},model:{value:e.searchData.type,callback:function(t){e.$set(e.searchData,"type",t)},expression:"searchData.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"资产管理者",clearable:""},on:{focus:e.queryStaff},model:{value:e.searchData.asset_manager,callback:function(t){e.$set(e.searchData,"asset_manager",t)},expression:"searchData.asset_manager"}},e._l(e.assetStaffData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"handle-box",attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),a("af-table-column",{attrs:{prop:"hostname",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"virtual_ip",label:"IP",align:"center"}}),a("af-table-column",{attrs:{prop:"type",label:"虚拟化类型 ",align:"center"}}),a("af-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),a("af-table-column",{attrs:{prop:"operate_system",label:"操作系统",align:"center"}}),a("af-table-column",{attrs:{prop:"operate_system_version",label:"操作系统版本",align:"center"}}),a("af-table-column",{attrs:{prop:"cpu_cores",label:"cpu核数",align:"center"}}),a("af-table-column",{attrs:{prop:"memory_capacity",label:"内存容量(G)",align:"center"}}),a("af-table-column",{attrs:{prop:"disk_capacity",label:"磁盘容量(G)",align:"center"}}),a("af-table-column",{attrs:{prop:"is_monitor",label:"是否监控",align:"center"}}),a("af-table-column",{attrs:{prop:"server_belong_business",label:"所属业务",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticClass:"color-link",attrs:{type:"info"},on:{click:function(a){return e.searchBusiness(t.row)}}},[e._v("查看业务")])]}}])}),a("af-table-column",{attrs:{prop:"label",label:"标签",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticClass:"color-link",attrs:{type:"info"},on:{click:function(a){return e.searchLabel(t.row)}}},[e._v("查看标签")])]}}])}),a("af-table-column",{attrs:{prop:"network",label:"网卡信息",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticClass:"color-link",attrs:{type:"info"},on:{click:function(a){return e.searchNetwork(t.row)}}},[e._v("查看网卡信息")])]}}])}),a("af-table-column",{attrs:{prop:"username",label:"管理用户名",align:"center"}}),a("af-table-column",{attrs:{prop:"snmp_username",label:"snmp用户名",align:"center"}}),a("af-table-column",{attrs:{prop:"usage",label:"用途",align:"center"}}),a("af-table-column",{attrs:{prop:"update_time",label:"更新时间",align:"center",formatter:e.dateFormat}}),a("af-table-column",{attrs:{prop:"asset_manager.username",label:"资产管理者",align:"center"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑 ")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handledelete(t.row)}}},[e._v("删除 ")]),a("el-button",{attrs:{type:"text",icon:"el-icon-s-goods"},on:{click:function(a){return e.handlemaintain(t.row)}}},[e._v("维护 "+e._s(t.row.maintain_status)+" ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:e.makeTitle,visible:e.editVisible,width:"50%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"hostname"}},[a("el-input",{model:{value:e.form.hostname,callback:function(t){e.$set(e.form,"hostname",t)},expression:"form.hostname"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ip",prop:"virtual_ip"}},[a("el-input",{model:{value:e.form.virtual_ip,callback:function(t){e.$set(e.form,"virtual_ip",t)},expression:"form.virtual_ip"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内存容量",prop:"memory_capacity"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.memory_capacity,callback:function(t){e.$set(e.form,"memory_capacity",e._n(t))},expression:"form.memory_capacity"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"磁盘容量",prop:"disk_capacity"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.disk_capacity,callback:function(t){e.$set(e.form,"disk_capacity",t)},expression:"form.disk_capacity"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"cpu核数"}},[a("el-input",{model:{value:e.form.cpu_cores,callback:function(t){e.$set(e.form,"cpu_cores",t)},expression:"form.cpu_cores"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作系统"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择操作系统",clearable:""},model:{value:e.form.operate_system,callback:function(t){e.$set(e.form,"operate_system",t)},expression:"form.operate_system"}},e._l(e.operatesystemOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作系统版本"}},[a("el-input",{model:{value:e.form.operate_system_version,callback:function(t){e.$set(e.form,"operate_system_version",t)},expression:"form.operate_system_version"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"虚拟化类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择虚拟化类型",clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用途"}},[a("el-input",{model:{value:e.form.usage,callback:function(t){e.$set(e.form,"usage",t)},expression:"form.usage"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ssh用户名"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ssh密码"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ssh端口",prop:"ssh_port"}},[a("el-input",{model:{value:e.form.ssh_port,callback:function(t){e.$set(e.form,"ssh_port",t)},expression:"form.ssh_port"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"snmp用户名"}},[a("el-input",{model:{value:e.form.snmp_username,callback:function(t){e.$set(e.form,"snmp_username",t)},expression:"form.snmp_username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"snmp密码"}},[a("el-input",{model:{value:e.form.snmp_password,callback:function(t){e.$set(e.form,"snmp_password",t)},expression:"form.snmp_password"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属业务"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",placeholder:"请选择所属业务",multiple:""},on:{focus:function(t){return e.querybusiness()}},model:{value:e.form.belong_business,callback:function(t){e.$set(e.form,"belong_business",t)},expression:"form.belong_business"}},e._l(e.businessData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",placeholder:"请选择标签",multiple:""},on:{focus:e.querylabel},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}},e._l(e.labelData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.tag_name,value:e.tag_name}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否监控"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.is_monitor,callback:function(t){e.$set(e.form,"is_monitor",t)},expression:"form.is_monitor"}},e._l(e.is_monitor_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资产管理者"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},on:{focus:e.queryStaff},model:{value:e.form.asset_manager,callback:function(t){e.$set(e.form,"asset_manager",t)},expression:"form.asset_manager"}},e._l(e.assetStaffData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"querynetworkData",attrs:{rules:e.networkrules,model:e.querynetworkData[0],"label-width":"85px","hide-required-asterisk":!0}},[a("el-form-item",{attrs:{label:"网卡信息"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{staticClass:"net_bg",attrs:{span:18}},e._l(e.querynetworkData,(function(t,s){return a("el-row",{key:t.id},[a("el-col",{staticClass:"net_row",attrs:{span:10}},[a("el-form-item",{attrs:{label:"mac",prop:"mac"}},[a("el-input",{model:{value:e.querynetworkData[s].mac,callback:function(t){e.$set(e.querynetworkData[s],"mac",t)},expression:"querynetworkData[index].mac"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"netmask"}},[a("el-input",{model:{value:e.querynetworkData[s].netmask,callback:function(t){e.$set(e.querynetworkData[s],"netmask",t)},expression:"querynetworkData[index].netmask"}})],1)],1),a("el-col",{staticClass:"net_row",attrs:{span:10}},[a("el-form-item",{attrs:{label:"ip",prop:"ip"}},[a("el-input",{model:{value:e.querynetworkData[s].ip,callback:function(t){e.$set(e.querynetworkData[s],"ip",t)},expression:"querynetworkData[index].ip"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"broadcast"}},[a("el-input",{model:{value:e.querynetworkData[s].broadcast,callback:function(t){e.$set(e.querynetworkData[s],"broadcast",t)},expression:"querynetworkData[index].broadcast"}})],1)],1),a("el-col",{staticClass:"net_row",attrs:{span:10}},[a("el-form-item",{attrs:{label:"type"}},[a("el-select",{attrs:{clearable:""},model:{value:e.querynetworkData[s].type,callback:function(t){e.$set(e.querynetworkData[s],"type",t)},expression:"querynetworkData[index].type"}},e._l(e.networkType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:14}},[a("el-button",{staticClass:"margin_26",attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.del(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)],1)})),1),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"margin_26",attrs:{size:"small",icon:"el-icon-circle-plus",type:"primary",plain:""},on:{click:e.addItem}})],1)],1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{staticClass:"alert_dialog",attrs:{title:"所属业务",visible:e.businessVisible,width:"30%"},on:{"update:visible":function(t){e.businessVisible=t}}},e._l(e.businessSingleDATA,(function(t){return a("ul",{key:t.id,staticClass:"network_ul",attrs:{model:e.businessSingleDATA[0]}},[a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("业务名称:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.name))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("业务负责人:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.staff.username))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("邮箱:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.staff.email))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("电话:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.staff.phone))])])])})),0),a("el-dialog",{staticClass:"alert_dialog",attrs:{title:"网卡信息",visible:e.networkVisible,width:"35%"},on:{"update:visible":function(t){e.networkVisible=t}}},e._l(e.querynetworkData,(function(t){return a("ul",{key:t.id,staticClass:"network_ul",attrs:{model:e.querynetworkData[0]}},[a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("mac:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.mac))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("netmask:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.netmask))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("ip:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.ip))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("broadcast:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.broadcast))])]),a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("type:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.type))])])])})),0),a("el-dialog",{staticClass:"alert_dialog",attrs:{title:"标签",visible:e.labelVisible,width:"30%"},on:{"update:visible":function(t){e.labelVisible=t}}},e._l(e.labelSingleData,(function(t){return a("ul",{key:t.id,staticClass:"network_ul",attrs:{model:e.labelSingleData[0]}},[a("li",[a("em",{staticClass:"network_ang"}),a("label",{staticClass:"network_label"},[e._v("标签名称:")]),a("span",{staticClass:"network_span"},[e._v(e._s(t.tag_name))])])])})),0)],1)},r=[],l=(a("99af"),a("d81d"),a("a434"),a("b0c0"),a("c54a")),n={name:"server",data:function(){return{tableData:[],editVisible:!1,businessVisible:!1,networkVisible:!1,labelVisible:!1,form:{},id:-1,businessData:[],businessSingleDATA:[{name:"",email:"",staff:{username:"",email:"",phone:""}}],networkData:{items:[{}]},pageTotal:0,query:{address:"",name:"",pageIndex:1,pageSize:10},searchData:{hostname:"",status:"",type:"",virtual_ip:"",asset_manager:""},querynetworkData:[{}],makeTitle:"",exportDataRes:[],typeOptions:[{value:"H3C"},{value:"HUAWEI"},{value:"VMWARE"}],statusOptions:[{value:"使用"},{value:"未使用"}],vendorData:[{value:"华为"},{value:"联想"}],roomData:[],rackData:[],datacenterData:[],labelData:[],labelSingleData:[],assetStaffData:[],dcName:"",roomName:"",data_center_id:"",location_zone_id:"",asset_manager_id:"",headers:{token:localStorage.getItem("token")},uploadUrl:"asset/api/virtual_server/excel/",networkType:[{value:"内网"},{value:"公网"}],rules:{virtual_ip:[{required:!0,message:"ip不能为空",trigger:"blur"},{validator:l["validateIP"],trigger:"blur"}],memory_capacity:[{required:!0,message:"请输入内存容量",trigger:"blur"}],disk_capacity:[{required:!0,message:"请输入磁盘容量",trigger:"blur"}],hostname:[{required:!0,message:"请输入主机名",trigger:"blur"}],ssh_port:[{required:!1,message:"请输入端口",trigger:"blur"},{validator:l["isInteger"],trigger:"blur"}]},networkrules:{ip:[{required:!0,message:"ip不能为空"},{validator:l["validateIP"],trigger:"blur"}],mac:[{required:!0,message:"mac地址不能为空"},{validator:l["validateMac"],trigger:"blur"}]},operatesystemOptions:[{value:"Windows"},{value:"Neokylin"},{value:"SUSE"},{value:"RedHat"},{value:"Centos"},{value:"Ubuntu"}],is_monitor_options:[{value:"是"},{value:"否"}],loading:!0}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("asset/api/virtual_server/?current_page=".concat(this.query.pageIndex,"&pre_page=").concat(this.query.pageSize,"&hostname=").concat(this.searchData.hostname,"&status=").concat(this.searchData.status,"&type=").concat(this.searchData.type,"&virtual_ip=").concat(this.searchData.virtual_ip,"&asset_manager=").concat(this.searchData.asset_manager),{headers:{token:localStorage.getItem("token")}}).then((function(t){e.tableData=t.data["data"],e.pageTotal=t.data["total_count"],e.loading=!1})).catch((function(t){e.$message.error(JSON.stringify(t.response.data)),e.loading=!1}))},handleEdit:function(e){var t=this;this.id=e.id,this.makeTitle="编辑",this.form=JSON.parse(JSON.stringify(e)),this.$http.get("asset/api/network/virtual_networks/?virtual_server_id=".concat(e.id),{headers:{token:localStorage.getItem("token")}}).then((function(e){t.querynetworkData=e.data})),this.labelData=e.label,this.businessData=e.belong_business;var a=[];for(var s in this.labelData)a.push(this.labelData[s].tag_name);this.form.label=a,void 0===e.ssh_port&&(this.form.ssh_port=22);var r=[];for(var l in this.businessData)r.push(this.businessData[l].name);e.asset_manager&&(this.asset_manager_id=e.asset_manager.id,this.form.asset_manager=e.asset_manager.username),this.form.belong_business=r,this.editVisible=!0,this.$nextTick((function(){t.$refs.form.clearValidate()}))},saveEdit:function(){var e=this;this.$refs.form.validate().then((function(t){console.log(t),e.$set(e.form,"network",e.querynetworkData),void 0!=e.form.memory_capacity?void 0!=e.form.disk_capacity?"增加"==e.makeTitle?e.$http.post("asset/api/virtual_server/",e.form,{headers:{token:localStorage.getItem("token")}}).then((function(t){201===t.status?(e.editVisible=!1,console.log("Response:"+JSON.stringify(t)),e.$message.success("保存成功！"),e.form={},e.getData()):e.$message.error("保存失败！")})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))})):(e.form.asset_manager&&"number"!=typeof e.form.asset_manager&&e.$set(e.form,"asset_manager",e.asset_manager_id),e.$http.put("asset/api/virtual_server/".concat(e.id,"/"),e.form,{headers:{token:localStorage.getItem("token")}}).then((function(t){e.editVisible=!1,console.log("Response:"+JSON.stringify(t)),e.$message.success("修改成功"),e.getData()})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))}))):e.$message.error("磁盘容量为必传参数"):e.$message.error("内存容量为必传参数")})).catch((function(t){console.log(t),e.$message.error("参数错误")}))},handleAdd:function(){var e=this;this.form={ssh_port:22},this.makeTitle="增加",this.editVisible=!0,this.querynetworkData=[{}],this.$nextTick((function(){e.$refs.form.clearValidate()})),this.$nextTick((function(){e.$refs.form.clearValidate()}))},querybusiness:function(){var e=this;this.$http.get("asset/api/business/",{headers:{token:localStorage.getItem("token")}}).then((function(t){e.businessData=t.data}))},addItem:function(){this.networkData.items.push({mac:"",broadcast:"",netmask:"",ip:"",type:""}),this.querynetworkData.push({mac:"",broadcast:"",netmask:"",ip:"",type:""})},del:function(e){this.networkData.items.splice(e,1),this.querynetworkData.splice(e,1)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},searchBusiness:function(e){if(""!=e.belong_business){for(var t in this.businessSingleDATA=e.belong_business,this.businessSingleDATA)null==this.businessSingleDATA[t].staff&&(this.businessSingleDATA[t].staff={username:"",email:"",phone:""});this.businessVisible=!0}else this.$message.warning("业务信息不存在")},searchLabel:function(e){""!=e.label?(this.labelSingleData=e.label,this.labelVisible=!0):this.$message.warning("标签信息不存在")},searchNetwork:function(e){var t=this;this.$http.get("asset/api/network/virtual_networks/?virtual_server_id=".concat(e.id),{headers:{token:localStorage.getItem("token")}}).then((function(e){t.querynetworkData=e.data,""==t.querynetworkData?t.$message.warning("网卡数据不存在"):t.networkVisible=!0}))},handledelete:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){t.$http.delete("asset/api/virtual_server/".concat(e.id,"/"),{headers:{token:localStorage.getItem("token")}}).then((function(e){204===e.status?(t.$message.success("删除成功！"),t.$set(t.query,"pageIndex",1),t.getData()):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))}))},exportTemplate:function(){Promise.all([a.e("chunk-54a55fd6"),a.e("chunk-14c0af1e"),a.e("chunk-2d0aa9b6")]).then(function(){var e=a("39a0"),t=e.export_json_to_excel,s=["名称","类型","状态","用途","服务器用户名","服务器密码","snmp用户名","snmp密码","操作系统","系统版本","cpu核数","内存容量","磁盘容量","ip"],r=[];t(s,r,"虚拟机导入模版")}.bind(null,a)).catch(a.oe)},exportData:function(){var e=this;Promise.all([a.e("chunk-54a55fd6"),a.e("chunk-14c0af1e"),a.e("chunk-2d0aa9b6")]).then(function(){var t=a("39a0"),s=t.export_json_to_excel,r=["ip","名称","类型","状态","用途","服务器用户名","服务器密码","snmp用户名","snmp密码","操作系统","系统版本","cpu核数","内存容量","磁盘容量","创建时间","资产管理者"],l=["virtual_ip","hostname","type","status","usage","username","password","snmp_username","snmp_password","operate_system","operate_system_version","cpu_cores","memory_capacity","disk_capacity","create_time","asset_manager"];e.$http.get("asset/api/virtual_server/?hostname=".concat(e.searchData.hostname,"&status=").concat(e.searchData.status,"&type=").concat(e.searchData.type),{headers:{token:localStorage.getItem("token")}}).then((function(t){e.exportDataRes=t.data})).then((function(){var t=e.exportDataRes,a=e.formatJson(l,t);s(r,a,"虚拟机服务器")}))}.bind(null,a)).catch(a.oe)},formatJson:function(e,t){var a=[];return t.map((function(t){null!=t.asset_manager&&(t.asset_manager=t.asset_manager.username);var s=e.map((function(e){return t[e]}));a.push(s)})),a},dateFormat:function(e,t){var a=e[t.property];if(null!=a){var s=new Date(a),r=s.getFullYear(),l=s.getMonth()+1,n=s.getDate(),o=s.getHours(),i=s.getMinutes(),c=s.getSeconds(),u=r+"-"+l+"-"+n+" "+o+":"+i+":"+c;return u}},importExcel:function(){0===this.$refs.uploadExcel.uploadFiles.length?this.$message.error("请选取文件"):this.$refs.uploadExcel.submit()},uploadSuccess:function(){this.$refs.uploadExcel.clearFiles(),this.getData(),alert("上传成功！")},handleError:function(e){alert(e)},querylabel:function(){var e=this;this.$http.get("asset/api/tag/",{headers:{token:localStorage.getItem("token")}}).then((function(t){e.labelData=t.data}))},queryStaff:function(){var e=this;this.$http.get("asset/api/staff/",{headers:{token:localStorage.getItem("token")}}).then((function(t){e.assetStaffData=t.data})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))}))},handlemaintain:function(e){var t=this;"是"==e.maintain_status?e.maintain_status="否":e.maintain_status="是",this.$http.put("asset/api/virtual_server/".concat(e.id,"/update_maintain_state/"),e,{headers:{token:localStorage.getItem("token")}}).then((function(e){console.log("Response:"+JSON.stringify(e)),t.$message.success("状态修改成功"),t.getData()})).catch((function(e){console.log(e.response.data),alert(JSON.stringify(e.response.data))}))}}},o=n,i=(a("a8eb"),a("2877")),c=Object(i["a"])(o,s,r,!1,null,"f61c4efa",null);t["default"]=c.exports},a434:function(e,t,a){"use strict";var s=a("23e7"),r=a("23cb"),l=a("a691"),n=a("50c4"),o=a("7b0b"),i=a("65f0"),c=a("8418"),u=a("1dde"),p=a("ae40"),m=u("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var a,s,u,p,m,f,_=o(this),v=n(_.length),k=r(e,v),y=arguments.length;if(0===y?a=s=0:1===y?(a=0,s=v-k):(a=y-2,s=b(d(l(t),0),v-k)),v+a-s>h)throw TypeError(g);for(u=i(_,s),p=0;p<s;p++)m=k+p,m in _&&c(u,p,_[m]);if(u.length=s,a<s){for(p=k;p<v-s;p++)m=p+s,f=p+a,m in _?_[f]=_[m]:delete _[f];for(p=v;p>v-s+a;p--)delete _[p-1]}else if(a>s)for(p=v-s;p>k;p--)m=p+s-1,f=p+a-1,m in _?_[f]=_[m]:delete _[f];for(p=0;p<a;p++)_[p+k]=arguments[p+2];return _.length=v-s+a,u}})},a8eb:function(e,t,a){"use strict";var s=a("98ef"),r=a.n(s);r.a},a9e3:function(e,t,a){"use strict";var s=a("83ab"),r=a("da84"),l=a("94ca"),n=a("6eeb"),o=a("5135"),i=a("c6b6"),c=a("7156"),u=a("c04e"),p=a("d039"),m=a("7c73"),f=a("241c").f,d=a("06cf").f,b=a("9bf2").f,h=a("58a8").trim,g="Number",_=r[g],v=_.prototype,k=i(m(v))==g,y=function(e){var t,a,s,r,l,n,o,i,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+c}for(l=c.slice(2),n=l.length,o=0;o<n;o++)if(i=l.charCodeAt(o),i<48||i>r)return NaN;return parseInt(l,s)}return+c};if(l(g,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,D=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof D&&(k?p((function(){v.valueOf.call(a)})):i(a)!=g)?c(new _(y(t)),a,D):y(t)},x=s?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;x.length>$;$++)o(_,w=x[$])&&!o(D,w)&&b(D,w,d(_,w));D.prototype=v,v.constructor=D,n(r,g,D)}},c54a:function(e,t,a){"use strict";a.r(t),a.d(t,"validateIP",(function(){return s})),a.d(t,"validateMac",(function(){return r})),a.d(t,"validateCh",(function(){return l})),a.d(t,"validatePhoneTwo",(function(){return n})),a.d(t,"validateEMail",(function(){return o})),a.d(t,"isInteger",(function(){return i}));a("a9e3");function s(e,t,a){if(""==t||void 0==t||null==t)a();else{var s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;s.test(t)||""==t?a():a(new Error("请输入正确的IP地址"))}}function r(e,t,a){if(""==t||void 0==t||null==t)a();else{var s=/[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}/;s.test(t)||""==t?a():a(new Error("请输入正确的MAC地址"))}}function l(e,t,a){if(""==t||void 0==t||null==t)a();else{var s=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;s.test(t)?a(new Error("名称不能含有中文")):a()}}function n(e,t,a){var s=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==t||void 0==t||null==t||s.test(t)||""==t?a():a(new Error("请输入正确的电话号码或者固话号码"))}function o(e,t,a){var s=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;""==t||void 0==t||null==t||s.test(t)?a():a(new Error("请输入正确的邮箱地址"))}function i(e,t,a){if(!t)return a(new Error("输入不可以为空"));setTimeout((function(){if(Number(t)){var e=/^[0-9]*[1-9][0-9]*$/,s=e.test(t);s?a():a(new Error("请输入数字"))}else a(new Error("请输入数字"))}),0)}},d81d:function(e,t,a){"use strict";var s=a("23e7"),r=a("b727").map,l=a("1dde"),n=a("ae40"),o=l("map"),i=n("map");s({target:"Array",proto:!0,forced:!o||!i},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);