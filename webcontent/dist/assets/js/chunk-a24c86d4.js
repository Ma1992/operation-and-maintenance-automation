(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a24c86d4"],{"5cb5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}})],1),a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-bottom":"15px"}},[a("span",[e._v("华为云环境：")]),a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择华为云环境"},on:{change:e.handleSelectHuaweiEnv},model:{value:e.huaweiyun_env,callback:function(t){e.huaweiyun_env=t},expression:"huaweiyun_env"}},e._l(e.huaweiyun_options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.hw_ip,value:e.hw_ip}})})),1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":"600"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"type",formatter:e.typeFormat,label:"交换机类型",align:"center"}}),a("el-table-column",{attrs:{prop:"portGroupNum",label:"端口组个数",align:"center"}}),a("el-table-column",{attrs:{prop:"isIgmpSnooping",formatter:e.igmpFormat,label:"IGMP Snooping",align:"center"}}),a("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}})],1)],1)])},i=[],s=a("424b"),o={data:function(){return{query:{address:"",name:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],huaweiyun_options:[],title:"",huaweiyun_env_info:"",huaweiyun_env:"",editVisible:!1,deleteVisible:!1,datetimeFormat:null,loading:!0,pageTotal:0,form:{},idx:-1,id:-1,rules:{script_name:[{required:!0,message:"请输入脚本名"}],script_type:[{required:!0,message:"请选择脚本类型",trigger:"blur"}],category:[{required:!0,message:"请选择脚本所属分类",trigger:"blur"}],content:[{required:!0,message:"请输入脚本内容",trigger:"blur"}],test_status:[{required:!0,message:"请选择脚本测试状态",trigger:"blur"}]}}},created:function(){this.token=localStorage.getItem("token"),this.username=localStorage.getItem("username"),this.getHuaweiyunData(),this.datetimeFormat=s["datetimeFormat"]},methods:{typeFormat:function(e){return 0===e.type?"普通模式":1===e.type?"eSwitch-VMDQ 直通模式":2===e.type?"SR-IOV 直通模式":void 0},igmpFormat:function(e){return!1===e.isIgmpSnooping?"未开启":!0===e.isIgmpSnooping?"已开启":void 0},getHuaweiyunData:function(){var e=this;this.$http.get("automation/api/huawei/",{headers:{token:this.token}}).then((function(t){sessionStorage.getItem("huaweiyun_env")?e.huaweiyun_env=JSON.parse(sessionStorage.getItem("huaweiyun_env")).hw_ip:(sessionStorage.setItem("huaweiyun_env",JSON.stringify(t.data[0])),e.huaweiyun_env=t.data[0].hw_ip),e.huaweiyun_options=t.data,e.getData()})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))}))},getData:function(){var e=this;this.$http.get("automation/api/huawei/network/",{headers:{token:this.token,env:sessionStorage.getItem("huaweiyun_env")}}).then((function(t){e.tableData=t.data.dvSwitchs,e.pageTotal=t.data.total,e.loading=!1})).catch((function(t){console.log(t),e.$message.error(e.$message.error("查询失败！")),e.loading=!1}))},handleSelectHuaweiEnv:function(e){this.tableData=[],this.handleSetHuaweiEnvInfo(e),sessionStorage.setItem("huaweiyun_env",JSON.stringify(this.huaweiyun_env_info)),this.getData()},handleSetHuaweiEnvInfo:function(e){for(var t=0,a=this.huaweiyun_options.length;t<a;t++)if(this.huaweiyun_options[t].hw_ip===e)return this.huaweiyun_env_info=this.huaweiyun_options[t]},handleSelectionChange:function(e){this.multipleSelection=e},handleCreate:function(){this.form={},this.title="新增",this.editVisible=!0},saveEdit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.warning("请选择必填项"),!1;e.$http.post("automation/api/script/",e.form,{headers:{token:e.token,env:sessionStorage.getItem("huaweiyun_env")}}).then((function(t){200===t.status||201===t.status?(e.$message.success("创建成功！"),e.editVisible=!1,e.getData()):e.$message.success("创建失败！")})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))}))}))},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()}}},r=o,u=(a("d65b"),a("2877")),l=Object(u["a"])(r,n,i,!1,null,"322b8f1a",null);t["default"]=l.exports},bbf3:function(e,t,a){},d65b:function(e,t,a){"use strict";var n=a("bbf3"),i=a.n(n);i.a}}]);