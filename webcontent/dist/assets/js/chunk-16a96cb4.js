(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a96cb4"],{"0d9f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("el-form",{attrs:{red:"form"}},[a("el-row",[a("el-col",{attrs:{span:17}},[a("el-form-item",{attrs:{label:"存储"}},[a("el-select",{staticClass:"selectIp",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入存储主机名称或IP","remote-method":t.queryHost},on:{change:t.changeQueryHost},model:{value:t.storageHost,callback:function(e){t.storageHost=e},expression:"storageHost"}},t._l(t.hostData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.hostname+"/"+t.manage_ip,value:t}})})),1)],1)],1)],1)],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:17}},[a("div",[a("el-button",{staticClass:"handle-box",attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("创建 ")])],1)]),a("el-col",{attrs:{span:2}},[a("el-select",{model:{value:t.mappingviewSearchName,callback:function(e){t.mappingviewSearchName=e},expression:"mappingviewSearchName"}},[a("el-option",{attrs:{label:"名称",value:"name"}}),a("el-option",{attrs:{label:"ID",value:"id"}})],1)],1),a("el-col",{attrs:{span:3}},["name"===t.mappingviewSearchName?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.nameSearchValue,callback:function(e){t.nameSearchValue=e},expression:"nameSearchValue"}}):t._e(),"id"===t.mappingviewSearchName?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.idSearchValue,callback:function(e){t.idSearchValue=e},expression:"idSearchValue"}}):t._e()],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"small"},on:{click:t.querymappingview}},[t._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.mappingviewloading,expression:"mappingviewloading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.selectmapping}},[a("af-table-column",{attrs:{prop:"NAME",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"ID",label:"ID",align:"center"}})],1),a("el-row",[a("el-tabs",{on:{"tab-click":t.handleStepOPtions},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"LUN组",name:"1"}},[a("span",[t._v("LUN组: "+t._s(t.groupname))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.grouptableData,border:""}},[a("af-table-column",{attrs:{prop:"NAME",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"ASSOCIATEMETADATA",label:"主机LUN ID",align:"center",formatter:t.handlehostlunid}}),a("af-table-column",{attrs:{prop:"ALLOCTYPE",label:"类型",align:"center",formatter:t.handlealloctype}}),a("af-table-column",{attrs:{prop:"USAGETYPE",label:"使用类型",align:"center",formatter:t.handleusagetype}}),a("af-table-column",{attrs:{prop:"HEALTHSTATUS",label:"健康状态",align:"center",formatter:t.handlehealthstatus}}),a("af-table-column",{attrs:{prop:"RUNNINGSTATUS",label:"运行状态",align:"center",formatter:t.handlelunrunningstatus}}),a("af-table-column",{attrs:{prop:"CAPACITY",label:"容量",align:"center",formatter:t.handlecapacity}}),a("af-table-column",{attrs:{prop:"PARENTNAME",label:"所属存储池",align:"center"}}),a("af-table-column",{attrs:{prop:"WWN",label:"WWN",align:"center"}})],1)],1),a("el-tab-pane",{attrs:{label:"主机组",name:"2"}},[a("span",[t._v("主机组: "+t._s(t.groupname))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.grouptableData,border:""}},[a("af-table-column",{attrs:{prop:"NAME",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"ID",label:"ID",align:"center"}}),a("af-table-column",{attrs:{prop:"HEALTHSTATUS",label:"健康状态",align:"center",formatter:t.handlehealthstatus}}),a("af-table-column",{attrs:{prop:"RUNNINGSTATUS",label:"运行状态",align:"center",formatter:t.handlehostrunningstatus}}),a("af-table-column",{attrs:{prop:"OPERATIONSYSTEM",label:"操作系统",align:"center",formatter:t.handleoperationsystem}}),a("af-table-column",{attrs:{prop:"IP",label:"IP地址",align:"center"}}),a("af-table-column",{attrs:{prop:"INITIATORNUM",label:"启动器数量",align:"center"}})],1)],1),a("el-tab-pane",{attrs:{label:"端口组",name:"3"}},[a("span",[t._v("端口组: "+t._s(t.groupname))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.grouptableData,border:""}},[a("af-table-column",{attrs:{prop:"TYPE",label:"类型",align:"center",formatter:t.handletype}}),a("af-table-column",{attrs:{prop:"LOCATION",label:"位置",align:"center"}}),a("af-table-column",{attrs:{prop:"HEALTHSTATUS",label:"健康状态",align:"center",formatter:t.handlehealthstatus}}),a("af-table-column",{attrs:{prop:"RUNNINGSTATUS",label:"运行状态",align:"center",formatter:t.handlerunningstatus}})],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"创建映射视图",visible:t.addmappingVisible,width:"30%"},on:{"update:visible":function(e){t.addmappingVisible=e}}},[a("el-form",{ref:"mappingviewform",attrs:{rules:t.mappingviewrules,model:t.mappingviewform,"label-width":"85px"}},[a("el-form-item",{attrs:{label:"名称",prop:"NAME"}},[a("el-input",{model:{value:t.mappingviewform.NAME,callback:function(e){t.$set(t.mappingviewform,"NAME",e)},expression:"mappingviewform.NAME"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.mappingviewform.DESCRIPTION,callback:function(e){t.$set(t.mappingviewform,"DESCRIPTION",e)},expression:"mappingviewform.DESCRIPTION"}})],1),a("el-form-item",{attrs:{label:"LUN组",prop:"lungroupname"}},[a("el-row",[a("el-col",{attrs:{span:17}},[a("el-input",{staticClass:"create-input",attrs:{disabled:!0},model:{value:t.lungroupname,callback:function(e){t.lungroupname=e},expression:"lungroupname"}})],1),a("el-col",{attrs:{span:7}},[a("el-button",{attrs:{size:"small",plain:"",loading:t.lungrouploading},on:{click:t.checklungroup}},[t._v("选择")])],1)],1)],1),a("el-form-item",{attrs:{label:"主机组",prop:"hostgroupname"}},[a("el-row",[a("el-col",{attrs:{span:17}},[a("el-input",{staticClass:"create-input",attrs:{disabled:!0},model:{value:t.hostgroupname,callback:function(e){t.hostgroupname=e},expression:"hostgroupname"}})],1),a("el-col",{attrs:{span:7}},[a("el-button",{attrs:{size:"small",plain:"",loading:t.hostgrouploading},on:{click:t.checkhostgroup}},[t._v("选择")])],1)],1)],1),a("el-checkbox",{staticClass:"portcheck",on:{change:t.selectPortGroupChecked},model:{value:t.portGroupChecked,callback:function(e){t.portGroupChecked=e},expression:"portGroupChecked"}},[a("el-form-item",{attrs:{label:"端口组"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{disabled:!0},model:{value:t.portgroupname,callback:function(e){t.portgroupname=e},expression:"portgroupname"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",plain:"",disabled:t.portGroupDisabled,loading:t.portgrouploading},on:{click:t.checkportgroup}},[t._v("选择")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",plain:"",disabled:t.portGroupDisabled},on:{click:function(e){return t.Addport()}}},[t._v("创建")])],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addmappingVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.dangerTipDisabled},on:{click:t.dangerTip}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"选择LUN组",visible:t.selectlungroupVisible,width:"30%"},on:{"update:visible":function(e){t.selectlungroupVisible=e}}},[a("el-row",{staticClass:"row-bg margin_bot",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:t.lungroupSearch,callback:function(e){t.lungroupSearch=e},expression:"lungroupSearch"}},[a("el-option",{attrs:{label:"名称",value:"name"}}),a("el-option",{attrs:{label:"ID",value:"id"}})],1)],1),a("el-col",{staticClass:"mr10",attrs:{span:8}},["name"===t.lungroupSearch?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.namelungroupValue,callback:function(e){t.namelungroupValue=e},expression:"namelungroupValue"}}):t._e(),"id"===t.lungroupSearch?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.idlungroupValue,callback:function(e){t.idlungroupValue=e},expression:"idlungroupValue"}}):t._e()],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:t.querylungroup}},[t._v("搜索")])],1)],1),a("el-row",[a("div",{staticClass:"div-height"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.lungrouptableData,border:"","highlight-current-row":""},on:{"row-click":t.selectlungroup}},[a("af-table-column",{attrs:{prop:"NAME",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"ID",label:"ID",align:"center"}}),a("af-table-column",{attrs:{prop:"ISADD2MAPPINGVIEW",label:"已归属映射视图",align:"center",formatter:t.handleISADD2MAPPINGVIEW}})],1)],1)]),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-checkbox",{on:{change:t.handlelungroup},model:{value:t.lungroupchecked,callback:function(e){t.lungroupchecked=e},expression:"lungroupchecked"}},[t._v("仅显示未归属于映射视图的LUN组")])],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-checkbox",{on:{change:t.handlelungroup},model:{value:t.lunidchecked,callback:function(e){t.lunidchecked=e},expression:"lunidchecked"}},[t._v("设置主机LUN ID")])],1),a("el-row",[a("el-form",[a("el-col",{attrs:{span:6}},[t.lunidchecked?a("el-form-item",{attrs:{label:"起始ID: ","label-width":"85px"}},[a("el-input",{staticClass:"create-input",on:{input:t.handlestartid},model:{value:t.startid,callback:function(e){t.startid=e},expression:"startid"}})],1):t._e()],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.selectlungroupVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.addlungroupDisabled},on:{click:t.addlungroup}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"选择主机组",visible:t.selecthostgroupVisible,width:"30%"},on:{"update:visible":function(e){t.selecthostgroupVisible=e}}},[a("el-row",{staticClass:"row-bg margin_bot",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:t.hostgroupSearch,callback:function(e){t.hostgroupSearch=e},expression:"hostgroupSearch"}},[a("el-option",{attrs:{label:"名称",value:"name"}}),a("el-option",{attrs:{label:"ID",value:"id"}})],1)],1),a("el-col",{staticClass:"mr10",attrs:{span:8}},["name"===t.hostgroupSearch?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.namehostgroupValue,callback:function(e){t.namehostgroupValue=e},expression:"namehostgroupValue"}}):t._e(),"id"===t.hostgroupSearch?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.idhostgroupValue,callback:function(e){t.idhostgroupValue=e},expression:"idhostgroupValue"}}):t._e()],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:t.queryhostgroup}},[t._v("搜索")])],1)],1),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hostgrouptableData,border:"","highlight-current-row":""},on:{"row-click":t.selecthostgroup}},[a("af-table-column",{attrs:{prop:"NAME",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"ID",label:"ID",align:"center"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.selecthostgroupVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.addhostgroupDisabled},on:{click:t.addhostgroup}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"选择端口组",visible:t.selectportgroupVisible,width:"30%"},on:{"update:visible":function(e){t.selectportgroupVisible=e}}},[a("el-row",{staticClass:"row-bg margin_bot",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:t.portgroupSearch,callback:function(e){t.portgroupSearch=e},expression:"portgroupSearch"}},[a("el-option",{attrs:{label:"名称",value:"name"}}),a("el-option",{attrs:{label:"ID",value:"id"}})],1)],1),a("el-col",{staticClass:"mr10",attrs:{span:8}},["name"===t.portgroupSearch?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.nameportgroupValue,callback:function(e){t.nameportgroupValue=e},expression:"nameportgroupValue"}}):t._e(),"id"===t.portgroupSearch?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.idportgroupValue,callback:function(e){t.idportgroupValue=e},expression:"idportgroupValue"}}):t._e()],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:t.queryportgroup}},[t._v("搜索")])],1)],1),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.portgrouptableData,border:"","highlight-current-row":""},on:{"row-click":t.selectportgroup}},[a("af-table-column",{attrs:{prop:"NAME",label:"名称",align:"center"}}),a("af-table-column",{attrs:{prop:"ID",label:"ID",align:"center"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.selectportgroupVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.selectportgroupDisabled},on:{click:t.addpostgroup}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"创建端口组",visible:t.addportgroupVisible,width:"77%"},on:{"update:visible":function(e){t.addportgroupVisible=e}}},[a("el-form",{ref:"portroupform",attrs:{rules:t.portrouprules,model:t.portgroupform,"label-width":"85px"}},[a("el-form-item",{attrs:{label:"名称",prop:"NAME"}},[a("el-input",{model:{value:t.portgroupform.NAME,callback:function(e){t.$set(t.portgroupform,"NAME",e)},expression:"portgroupform.NAME"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.portgroupform.DESCRIPTION,callback:function(e){t.$set(t.portgroupform,"DESCRIPTION",e)},expression:"portgroupform.DESCRIPTION"}})],1),a("el-row",[a("el-col",{attrs:{span:11}},[a("p",{staticClass:"portgroup_create_p"},[t._v("可选端口")]),a("el-row",{staticClass:"row-bg margin_bot",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:6}},[a("el-select",{model:{value:t.portGroupSearchName,callback:function(e){t.portGroupSearchName=e},expression:"portGroupSearchName"}},[a("el-option",{attrs:{label:"位置",value:"location"}}),a("el-option",{attrs:{label:"类型",value:"type"}}),a("el-option",{attrs:{label:"健康状态",value:"health"}}),a("el-option",{attrs:{label:"运行状态",value:"running"}})],1)],1),a("el-col",{staticClass:"mr10",attrs:{span:6}},["location"===t.portGroupSearchName?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.portGroupSearchValue,callback:function(e){t.portGroupSearchValue=e},expression:"portGroupSearchValue"}}):t._e(),"type"===t.portGroupSearchName?a("el-select",{model:{value:t.typeSelect,callback:function(e){t.typeSelect=e},expression:"typeSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"FC端口",value:"212"}}),a("el-option",{attrs:{label:"以太网端口",value:"213"}}),a("el-option",{attrs:{label:"FCoE端口",value:"252"}}),a("el-option",{attrs:{label:"IB端口",value:"16500"}})],1):t._e(),"health"===t.portGroupSearchName?a("el-select",{model:{value:t.healthSelect,callback:function(e){t.healthSelect=e},expression:"healthSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"正常",value:"1"}}),a("el-option",{attrs:{label:"故障",value:"2"}})],1):t._e(),"running"===t.portGroupSearchName?a("el-select",{model:{value:t.runningSelect,callback:function(e){t.runningSelect=e},expression:"runningSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"正常",value:"1"}}),a("el-option",{attrs:{label:"运行",value:"2"}}),a("el-option",{attrs:{label:"已连接",value:"10"}}),a("el-option",{attrs:{label:"未连接",value:"11"}})],1):t._e()],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:t.queryleftportData}},[t._v("搜索")])],1)],1),a("div",{staticClass:"div-height"},[a("el-table",{key:t.tableKey,ref:"portTable",staticClass:"margin_bot",attrs:{"row-key":t.getRowKeys,data:t.leftPortTableData,border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleportgroupChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("af-table-column",{attrs:{prop:"TYPE",label:"类型",align:"center",formatter:t.handletype}}),a("af-table-column",{attrs:{prop:"LOCATION",label:"位置",align:"center"}}),a("af-table-column",{attrs:{prop:"HEALTHSTATUS",label:"健康状态",align:"center",formatter:t.handlehealthstatus}}),a("af-table-column",{attrs:{prop:"RUNNINGSTATUS",label:"运行状态",align:"center",formatter:t.handlerunningstatus}})],1)],1)],1),a("el-col",{staticClass:"trans_create_but",attrs:{span:2}},[a("el-button",{attrs:{type:"primary",disabled:!t.leftportData.length,icon:"el-icon-arrow-right",circle:""},on:{click:t.addporttoright}}),a("br"),a("el-button",{staticStyle:{"margin-left":"0","margin-top":"10px"},attrs:{type:"primary",disabled:!t.selectedportList.length,icon:"el-icon-arrow-left",circle:""},on:{click:t.removeporttoleft}})],1),a("el-col",{attrs:{span:11}},[a("p",{staticClass:"portgroup_create_p"},[t._v("已选端口")]),a("el-row",{staticClass:"row-bg margin_bot",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:6}},[a("el-select",{model:{value:t.portrightSearchName,callback:function(e){t.portrightSearchName=e},expression:"portrightSearchName"}},[a("el-option",{attrs:{label:"位置",value:"location"}}),a("el-option",{attrs:{label:"类型",value:"type"}}),a("el-option",{attrs:{label:"健康状态",value:"health"}}),a("el-option",{attrs:{label:"运行状态",value:"running"}})],1)],1),a("el-col",{staticClass:"mr10",attrs:{span:6}},["location"===t.portrightSearchName?a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.rightLocationValue,callback:function(e){t.rightLocationValue=e},expression:"rightLocationValue"}}):t._e(),"type"===t.portrightSearchName?a("el-select",{model:{value:t.righttypeSelect,callback:function(e){t.righttypeSelect=e},expression:"righttypeSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"FC端口",value:"212"}}),a("el-option",{attrs:{label:"以太网端口",value:"213"}}),a("el-option",{attrs:{label:"FCoE端口",value:"252"}}),a("el-option",{attrs:{label:"IB端口",value:"16500"}})],1):t._e(),"health"===t.portrightSearchName?a("el-select",{model:{value:t.righthealthSelect,callback:function(e){t.righthealthSelect=e},expression:"righthealthSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"正常",value:"1"}}),a("el-option",{attrs:{label:"故障",value:"2"}})],1):t._e(),"running"===t.portrightSearchName?a("el-select",{model:{value:t.rightrunningSelect,callback:function(e){t.rightrunningSelect=e},expression:"rightrunningSelect"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"正常",value:"1"}}),a("el-option",{attrs:{label:"运行",value:"2"}}),a("el-option",{attrs:{label:"已连接",value:"10"}}),a("el-option",{attrs:{label:"未连接",value:"11"}})],1):t._e()],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:t.queryrightportData}},[t._v("搜索")])],1)],1),a("div",{staticClass:"div-height"},[a("el-table",{key:t.tableKey,ref:"selectedportTable",attrs:{"row-key":t.getRowKeys,data:t.selectedPorttableData,border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectedPortChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("af-table-column",{attrs:{prop:"TYPE",label:"类型",align:"center",formatter:t.handletype}}),a("af-table-column",{attrs:{prop:"LOCATION",label:"位置",align:"center"}}),a("af-table-column",{attrs:{prop:"HEALTHSTATUS",label:"健康状态",align:"center",formatter:t.handlehealthstatus}}),a("af-table-column",{attrs:{prop:"RUNNINGSTATUS",label:"运行状态",align:"center",formatter:t.handlerunningstatus}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addportgroupVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.createportgroup}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"执行结果",visible:t.addportgroupresultVisible,width:"30%"},on:{"update:visible":function(e){t.addportgroupresultVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.portgroupresultData,border:""}},[a("af-table-column",{attrs:{prop:"name",label:"操作",align:"center"}}),a("af-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),a("af-table-column",{attrs:{prop:"reason",label:"失败原因和建议",align:"center"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.addportgroupresult}},[t._v("关闭")])],1)],1),a("el-dialog",{attrs:{title:"危险",visible:t.promptVisible,width:"30%"},on:{"update:visible":function(e){t.promptVisible=e}}},[a("div",{staticClass:"prompt-border"},[a("span",[t._v(" 您将要将LUN组("+t._s(t.lungroupname)+")中的所有LUN映射给主机组（"+t._s(t.hostgroupname)+"）中的所有主机。"),a("br"),t._v(" 如果主机组中存在多个主机且没有做好访问互斥，则多个业务主机向LUN写数据可能导致数据损坏或者不一致。"),a("br"),t._v(" 建议：执行该操作前请确认多个业务主机上已经做好访问互斥的配置。 ")])]),a("el-row",[a("el-checkbox",{on:{change:t.handleCheckSelect},model:{value:t.savemappingviewChecked,callback:function(e){t.savemappingviewChecked=e},expression:"savemappingviewChecked"}},[t._v("我已阅读上述信息，了解执行此操作带来的后果。")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.promptVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.mappingSelectDisabled},on:{click:t.saveAddMappingViewList}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"执行结果",visible:t.addmappingviewresultVisible,width:"30%"},on:{"update:visible":function(e){t.addmappingviewresultVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.mappingviewresultData,border:""}},[a("af-table-column",{attrs:{prop:"name",label:"操作",align:"center"}}),a("af-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),a("af-table-column",{attrs:{prop:"reason",label:"失败原因和建议",align:"center"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.addmappingviewresult}},[t._v("关闭")])],1)],1)],1)},o=[],l=(a("99af"),a("4160"),a("caad"),a("c975"),a("a434"),a("b680"),a("d3b7"),a("25f0"),a("2532"),a("159b"),a("96cf"),a("1da1")),n={name:"LunGroup",data:function(){return{addmappingVisible:!1,storageresult:{},storage_env:"",tableData:[],copytableData:[],storageHost:"",mappingviewform:{},mappingviewrules:{NAME:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:31,message:"请输入字母、数字、 “_”、“-”、 “.”和中文字符",trigger:"blur"}],lungroupname:[{required:!0,message:"请选择LUN组",trigger:"blur"}],hostgroupname:[{required:!0,message:"请选择主机组",trigger:"blur"}]},addmappingviewVisible:!1,selectlungroupVisible:!1,lungrouptableData:[],lungroupchecked:!0,ISADD2MAPPINGVIEW:!1,selectlungroupData:{},lunidchecked:!1,startid:0,lungroupname:"",selecthostgroupVisible:!1,hostgrouptableData:[],hostgroupname:"",selecthostgroupData:{},portGroupChecked:!1,portGroupDisabled:!0,portgrouptableData:[],selectportgroupVisible:!1,portgroupname:"",portgroupform:{},portrouprules:{NAME:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:31,message:"请输入字母、数字、 “_”、“-”、 “.”和中文字符",trigger:"blur"}]},addportgroupVisible:!1,portGroupSearchName:"location",portGroupSearchValue:"",tableKey:0,leftPortTableData:[],leftportData:[],selectedportList:[],selectedPorttableData:[],ETH_PORT:[],FC_PORT:[],FCoE_PORT:[],IB_PORT:[],typeSelect:"全部",healthSelect:"全部",runningSelect:"全部",allportList:[],hostData:[],mappingviewloading:!1,portrightSearchName:"location",rightLocationValue:"",righttypeSelect:"全部",righthealthSelect:"全部",rightrunningSelect:"全部",allrightportList:[],portgroupresultData:[],addportgroupresultVisible:!1,promptVisible:!1,savemappingviewChecked:!1,mappingSelectDisabled:!0,mappingviewresultData:[],addmappingviewresultVisible:!1,mappingviewSearchName:"name",nameSearchValue:"",idSearchValue:"",dangerTipDisabled:!0,lungrouploading:!1,lungroupSearch:"name",namelungroupValue:"",idlungroupValue:"",copylungrouptableData:[],addlungroupDisabled:!0,hostgrouploading:!1,hostgroupSearch:"name",namehostgroupValue:"",idhostgroupValue:"",copyhostgrouptableData:[],addhostgroupDisabled:!0,portgrouploading:!1,selectportgroupDisabled:!0,copyportgrouptableData:[],portgroupSearch:"name",nameportgroupValue:"",idportgroupValue:"",activeIndex:"1",mappingluntableData:[],mappinghosttableData:[],mappingporttableData:[],selectmappingview:{},groupInfo:[],grouptableData:[],groupname:""}},created:function(){this.getData()},methods:{getmappingviewList:function(){var t=this;this.mappingviewloading=!0,this.$http.post("automation/api/storage/mappingviewlist/",{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(e){t.tableData=e.data,t.copytableData=t.tableData,t.mappingviewloading=!1})).catch((function(e){t.$message.error(JSON.stringify(e.response.data.msg)),t.mappingviewloading=!1}))},getData:function(){var t=this;this.$http.get("asset/api/storage/?current_page=1&pre_page=1",{headers:{token:localStorage.getItem("token")}}).then((function(e){0!=e.data["data"].length?(sessionStorage.getItem("storage_env")?t.storage_env=JSON.parse(sessionStorage.getItem("storage_env")):(sessionStorage.setItem("storage_env",JSON.stringify(e.data["data"][0])),t.storage_env=e.data["data"][0]),t.storageresult=t.storage_env,t.getmappingviewList(),t.storageHost=t.storage_env["hostname"]+"/"+t.storage_env["manage_ip"]):t.$message.error("未发现存储环境！")})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},handleAdd:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading"});this.mappingviewform={},this.lungroupname="",this.hostgroupname="",this.portgroupname="",this.portGroupChecked=!1,this.portGroupDisabled=!0,this.$http.post("automation/api/storage/nextavailableid/?type=245",{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(a){var r=a["data"]["ID"];r=parseInt(r)+1;var o=r.toString().length;1===o?t.$set(t.mappingviewform,"NAME","MappingView00"+r):2===o?t.$set(t.mappingviewform,"NAME","MappingView0"+r):t.$set(t.mappingviewform,"NAME","MappingView"+r),e.close(),t.addmappingVisible=!0})).catch((function(a){e.close(),t.$message.error(JSON.stringify(a.response.data))}))},getlungroupList:function(){var t=this;this.$http.post("automation/api/storage/lun_group_list/?ISADD2MAPPINGVIEW=".concat(this.ISADD2MAPPINGVIEW),{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(e){t.lungrouptableData=e.data["data"],t.copylungrouptableData=t.lungrouptableData,t.lungrouploading=!1,t.selectlungroupVisible=!0})).catch((function(e){t.lungrouploading=!1,t.$message.error(JSON.stringify(e.response.data))}))},checklungroup:function(){this.lungrouploading=!0,this.addlungroupDisabled=!0,this.getlungroupList()},addlungroup:function(){this.selectlungroupVisible=!1,this.mappingviewform.NAME&&this.lungroupname&&this.hostgroupname&&(this.portGroupChecked?this.portgroupname&&(this.dangerTipDisabled=!1):this.dangerTipDisabled=!1)},handlelungroup:function(){!0===this.lungroupchecked?this.ISADD2MAPPINGVIEW=!1:this.ISADD2MAPPINGVIEW="",this.getlungroupList()},handleISADD2MAPPINGVIEW:function(t){return"false"==t.ISADD2MAPPINGVIEW?"否":"true"==t.ISADD2MAPPINGVIEW?"是":""},selectlungroup:function(t){this.selectlungroupData=t,this.lunidchecked?this.lungroupname=this.selectlungroupData.NAME+"(起始主机LUN ID: "+this.startid+")":this.lungroupname=this.selectlungroupData.NAME,this.addlungroupDisabled=!1},handlestartid:function(t){this.lungroupname=this.selectlungroupData.NAME+"(起始主机LUN ID: "+t+")"},selecthostgroup:function(t){this.selecthostgroupData=t,this.hostgroupname=this.selecthostgroupData.NAME,this.addhostgroupDisabled=!1},addhostgroup:function(){this.selecthostgroupVisible=!1,this.mappingviewform.NAME&&this.lungroupname&&this.hostgroupname&&(this.portGroupChecked?this.portgroupname&&(this.dangerTipDisabled=!1):this.dangerTipDisabled=!1)},gethostgroupList:function(){var t=this;this.$http.post("automation/api/storage/host_group_list/",this.storageresult,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.hostgrouptableData=e.data["data"],t.copyhostgrouptableData=t.hostgrouptableData,t.hostgrouploading=!1,t.selecthostgroupVisible=!0})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},checkhostgroup:function(){this.hostgrouploading=!0,this.addhostgroupDisabled=!0,this.gethostgroupList()},selectPortGroupChecked:function(){!0===this.portGroupChecked?this.portGroupDisabled=!1:this.portGroupDisabled=!0},getportgroupList:function(){var t=this;this.$http.post("automation/api/storage/port_group_list/",{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(e){t.portgrouptableData=e.data["data"],t.copyportgrouptableData=t.portgrouptableData,t.portgrouploading=!1,t.selectportgroupVisible=!0})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},checkportgroup:function(){this.portgrouploading=!0,this.selectportgroupDisabled=!0,this.getportgroupList()},selectportgroup:function(t){this.selectportgroupData=t,this.portgroupname=this.selectportgroupData.NAME,this.selectportgroupDisabled=!1},addpostgroup:function(){this.selectportgroupVisible=!1,this.mappingviewform.NAME&&this.lungroupname&&this.hostgroupname&&(this.portGroupChecked?this.portgroupname&&(this.dangerTipDisabled=!1):this.dangerTipDisabled=!1)},handleportgroupChange:function(t){var e=this;this.leftportData=[],t&&t.forEach((function(t){t&&e.leftportData.push(t)})),console.log(this.leftportData,555555)},handleSelectedPortChange:function(t){var e=this;this.selectedportList=[],t&&t.forEach((function(t){t&&e.selectedportList.push(t)}))},Addport:function(){var t=this;this.portgroupform={},this.selectedPorttableData=[],this.allportList=[],this.leftportData=[],this.selectedportList=[],this.allrightportList=[];var e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading"});this.$http.post("automation/api/storage/nextavailableid/?type=257",{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(a){var r=a["data"]["ID"];r=parseInt(r)+1;var o=r.toString().length;1===o?t.$set(t.portgroupform,"NAME","PortGroup00"+r):2===o?t.$set(t.portgroupform,"NAME","PortGroup0"+r):t.$set(t.portgroupform,"NAME","PortGroup"+r),t.$http.post("automation/api/storage/portlist/",{manage_address:t.storageresult.manage_address,manage_username:t.storageresult.manage_username,manage_password:t.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(a){t.ETH_PORT=a.data.ETH_PORT,t.FC_PORT=a.data.FC_PORT,t.FCoE_PORT=a.data.FCoE_PORT,t.IB_PORT=a.data.IB_PORT,console.log(t.ETH_PORT.length,t.FC_PORT.length,t.FCoE_PORT.length,t.IB_PORT.length),t.leftPortTableData=t.ETH_PORT.concat(t.FC_PORT).concat(t.FCoE_PORT).concat(t.IB_PORT),t.allportList=t.leftPortTableData,e.close(),t.addportgroupVisible=!0}))})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},getRowKeys:function(t){return t.LOCATION+"/"+t.TYPE},addporttoright:function(){var t=this;setTimeout((function(){t.$refs["portTable"].clearSelection(),t.$refs["selectedportTable"].clearSelection()}),0),this.leftportData.forEach((function(e){t.allrightportList.push(e)})),this.selectedPorttableData=this.allrightportList;for(var e=this.allportList.length-1;e>=0;e--)for(var a=0;a<this.leftportData.length;a++)if(this.allportList[e]&&this.leftportData[a]){var r=this.allportList[e].LOCATION+"/"+this.allportList[e].TYPE,o=this.leftportData[a].LOCATION+"/"+this.leftportData[a].TYPE;r===o&&this.allportList.splice(e,1)}},removeporttoleft:function(){var t=this;setTimeout((function(){t.$refs["portTable"].clearSelection(),t.$refs["selectedportTable"].clearSelection()}),0),this.selectedportList.forEach((function(e){t.allportList.push(e)})),this.leftPortTableData=this.allportList;for(var e=this.allrightportList.length-1;e>=0;e--)for(var a=0;a<this.selectedportList.length;a++)if(this.allrightportList[e]&&this.selectedportList[a]){var r=this.allrightportList[e].LOCATION+"/"+this.allrightportList[e].TYPE,o=this.selectedportList[a].LOCATION+"/"+this.selectedportList[a].TYPE;r===o&&this.allrightportList.splice(e,1)}},queryHost:function(t){var e=this;this.$http.get("asset/api/storage/storage/?query=".concat(t),{headers:{token:localStorage.getItem("token")}}).then((function(t){e.hostData=t.data})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))}))},changeQueryHost:function(t){sessionStorage.setItem("storage_env",JSON.stringify(t)),this.storageHost=t.hostname+"/"+t.manage_ip,this.storageresult=t,this.tableData=[],this.getmappingviewList()},handletype:function(t){return 213==t.TYPE?"以太网端口":212==t.TYPE?"FC端口":252==t.TYPE?"FCoE端口":16500==t.TYPE?"IB端口":""},handlehealthstatus:function(t){return"0"==t.HEALTHSTATUS?"未知":"1"==t.HEALTHSTATUS?"正常":"2"==t.HEALTHSTATUS?"故障":"3"==t.HEALTHSTATUS?"即将故障":"9"==t.HEALTHSTATUS?"不一致":""},handlerunningstatus:function(t){return"0"==t.RUNNINGSTATUS?"未知":"1"==t.RUNNINGSTATUS?"正常":"2"==t.RUNNINGSTATUS?"运行":"10"==t.RUNNINGSTATUS?"已连接":"11"==t.RUNNINGSTATUS?"未连接":""},handlelunrunningstatus:function(t){return"53"==t.RUNNINGSTATUS?"初始化中":"27"==t.RUNNINGSTATUS?"在线":"28"==t.RUNNINGSTATUS?"离线":""},handlehostrunningstatus:function(t){return"1"==t.RUNNINGSTATUS?"正常":""},queryleftportData:function(){var t=this;"location"===this.portGroupSearchName?""!=this.portGroupSearchValue?(this.leftPortTableData=[],this.allportList.forEach((function(e){var a=e.LOCATION.includes(t.portGroupSearchValue);!0===a&&t.leftPortTableData.push(e)}))):this.leftPortTableData=this.allportList:"type"===this.portGroupSearchName?"全部"===this.typeSelect||"all"===this.typeSelect?this.leftPortTableData=this.allportList:(this.leftPortTableData=[],console.log(this.allportList),this.allportList.forEach((function(e){var a=e.TYPE.toString().includes(t.typeSelect);!0===a&&t.leftPortTableData.push(e)}))):"health"===this.portGroupSearchName?"全部"===this.healthSelect||"all"===this.healthSelect?this.leftPortTableData=this.allportList:(this.leftPortTableData=[],this.allportList.forEach((function(e){var a=e.HEALTHSTATUS.includes(t.healthSelect);!0===a&&t.leftPortTableData.push(e)}))):"running"===this.portGroupSearchName&&("全部"===this.runningSelect||"all"===this.runningSelect?this.leftPortTableData=this.allportList:(this.leftPortTableData=[],this.allportList.forEach((function(e){var a=e.RUNNINGSTATUS.includes(t.runningSelect);!0===a&&t.leftPortTableData.push(e)}))))},queryrightportData:function(){var t=this;"location"===this.portrightSearchName?""!=this.rightLocationValue?(this.selectedPorttableData=[],this.allrightportList.forEach((function(e){var a=e.LOCATION.includes(t.rightLocationValue);!0===a&&t.selectedPorttableData.push(e)}))):this.selectedPorttableData=this.allrightportList:"type"===this.portrightSearchName?"全部"===this.righttypeSelect||"all"===this.righttypeSelect?this.selectedPorttableData=this.allrightportList:(this.selectedPorttableData=[],this.allrightportList.forEach((function(e){var a=e.TYPE.toString().includes(t.righttypeSelect);!0===a&&t.selectedPorttableData.push(e)}))):"health"===this.portrightSearchName?"全部"===this.righthealthSelect||"all"===this.righthealthSelect?this.selectedPorttableData=this.allrightportList:(this.selectedPorttableData=[],this.allrightportList.forEach((function(e){var a=e.HEALTHSTATUS.includes(t.righthealthSelect);!0===a&&t.selectedPorttableData.push(e)}))):"running"===this.portrightSearchName&&("全部"===this.rightrunningSelect||"all"===this.rightrunningSelect?this.selectedPorttableData=this.allrightportList:(this.selectedPorttableData=[],this.allrightportList.forEach((function(e){var a=e.RUNNINGSTATUS.includes(t.rightrunningSelect);!0===a&&t.selectedPorttableData.push(e)}))))},saveAddMappingViewList:function(){console.log(this.selecthostgroupData,"hostgroup"),console.log(this.selectlungroupData,"lungroup"),console.log(this.selectportgroupData,"portgroup"),console.log(this.mappingviewform,"mappingviewform"),this.mappingviewresultData=[];var t="创建映射视图 "+this.mappingviewform.NAME,e={name:t,status:"正在执行",reason:""};if(this.mappingviewresultData.push(e),this.selecthostgroupData){var a="增加主机组 "+this.selecthostgroupData.NAME;this.mappingviewresultData.push({name:a,status:"等待执行",reason:"",id:this.selecthostgroupData.ID,type:this.selecthostgroupData.TYPE})}if(this.selectlungroupData){var r="增加LUN组 "+this.selectlungroupData.NAME;this.mappingviewresultData.push({name:r,status:"等待执行",reason:"",id:this.selectlungroupData.ID,type:this.selectlungroupData.TYPE})}if(this.selectportgroupData){var o="增加端口组 "+this.selectportgroupData.NAME;this.mappingviewresultData.push({name:o,status:"等待执行",reason:"",id:this.selectportgroupData.ID,type:this.selectportgroupData.TYPE})}this.addmappingviewresultVisible=!0,this.create_mapping_view()},create_mapping_view:function(){var t=this,e=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var r,o,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.length,o=Object(e),l=0;case 3:if(!(l<r)){t.next=12;break}if(!(l in o)){t.next=9;break}return console.log("doing foreach..."),n=o[l],t.next=9,a(n,l,o);case 9:l++,t.next=3;break;case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();this.$http.post("automation/api/storage/create_mapping_view/",{mapping_view:this.mappingviewform,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password,manage_address:this.storageresult.manage_address},{headers:{token:localStorage.getItem("token")}}).then((function(a){var r=a.data;200===a.status&&(t.mappingviewresultData[0].status="成功"),r&&e(t.mappingviewresultData,function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(o>0)){e.next=3;break}return e.next=3,t.mappingviewassociate(a,r.ID);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())})).catch((function(e){t.mappingviewresultData[0].status="执行失败",t.mappingviewresultData[0].reason=e.response.data.msg,t.$message.error(JSON.stringify(e.response.data.msg))}))},mappingviewassociate:function(t,e){var a=this;return new Promise((function(r,o){t.status="正在执行",a.$http.post("automation/api/storage/mapping_view_associate/",{mapping_associate:{ID:e,ASSOCIATEOBJTYPE:t.type,ASSOCIATEOBJID:t.id},manage_username:a.storageresult.manage_username,manage_password:a.storageresult.manage_password,manage_address:a.storageresult.manage_address,HOSTLUNID:a.startid},{headers:{token:localStorage.getItem("token")}}).then((function(e){200===e.status&&(t.status="成功"),r(e),console.log(r,o,"resolve")})).catch((function(e){o(e),t.status="执行失败",t.reason=e.response.data.msg,a.$message.error(JSON.stringify(e.response.data.msg))}))}))},dangerTip:function(){this.promptVisible=!0},createportgroup:function(){this.portgroupresultData=[];var t="创建端口组 "+this.portgroupform.NAME,e={name:t,status:"正在执行",reason:""};this.portgroupresultData.push(e);for(var a=0;a<this.allrightportList.length;a++){var r="";213===this.allrightportList[a].TYPE?r="以太网端口":212===this.allrightportList[a].TYPE?r="FC端口":252===this.allrightportList[a].TYPE?r="FCoE端口":16500===this.allrightportList[a].TYPE&&(r="IB端口");var o="增加端口 "+r+":"+this.allrightportList[a].LOCATION;this.portgroupresultData.push({name:o,status:"等待执行",reason:"",port_id:this.allrightportList[a].ID,port_type:this.allrightportList[a].TYPE})}this.addportgroupresultVisible=!0,this.create_port_group()},create_port_group:function(){var t=this,e=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var r,o,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.length,o=Object(e),l=0;case 3:if(!(l<r)){t.next=12;break}if(!(l in o)){t.next=9;break}return console.log("doing foreach..."),n=o[l],t.next=9,a(n,l,o);case 9:l++,t.next=3;break;case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();this.$http.post("automation/api/storage/create_port_group/",{port_group:this.portgroupform,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password,manage_address:this.storageresult.manage_address},{headers:{token:localStorage.getItem("token")}}).then((function(a){var r=a.data;200===a.status?t.portgroupresultData[0].status="成功":(t.portgroupresultData[0].status="执行失败",t.portgroupresultData[0].reason=a.data),r&&e(t.portgroupresultData,function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(o>0)){e.next=3;break}return e.next=3,t.portgroupassociate(a,r.ID);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}))},portgroupassociate:function(t,e){var a=this;return new Promise((function(r,o){t.status="正在执行",a.$http.post("automation/api/storage/port_group_associate/",{port_associate:{ID:e,ASSOCIATEOBJTYPE:t.port_type,ASSOCIATEOBJID:t.port_id},manage_username:a.storageresult.manage_username,manage_password:a.storageresult.manage_password,manage_address:a.storageresult.manage_address},{headers:{token:localStorage.getItem("token")}}).then((function(e){200===e.status&&(t.status="成功"),r(e),console.log(r,o,"resolve")})).catch((function(e){o(e),t.status="执行失败",t.reason=e.response.data.msg,a.$message.error(JSON.stringify(e.response.data.msg))}))}))},addportgroupresult:function(){this.addportgroupresultVisible=!1,this.addportgroupVisible=!1},addmappingviewresult:function(){this.addmappingviewresultVisible=!1,this.promptVisible=!1,this.addmappingVisible=!1,this.getmappingviewList()},handleCheckSelect:function(){this.mappingSelectDisabled=!this.mappingSelectDisabled},querymappingview:function(){var t=this;"name"===this.mappingviewSearchName?""!=this.nameSearchValue?(this.tableData=[],this.copytableData.forEach((function(e){var a=e.NAME.includes(t.nameSearchValue);!0===a&&t.tableData.push(e)}))):this.tableData=this.copytableData:"id"===this.mappingviewSearchName&&(""!=this.idSearchValue?(this.tableData=[],this.copytableData.forEach((function(e){var a=e.ID.includes(t.idSearchValue);!0===a&&t.tableData.push(e)}))):this.tableData=this.copytableData)},querylungroup:function(){var t=this;"name"===this.lungroupSearch?""!=this.namelungroupValue?(this.lungrouptableData=[],this.copylungrouptableData.forEach((function(e){var a=e.NAME.includes(t.namelungroupValue);!0===a&&t.lungrouptableData.push(e)}))):this.lungrouptableData=this.copylungrouptableData:"id"===this.lungroupSearch&&(""!=this.idlungroupValue?(this.lungrouptableData=[],this.copylungrouptableData.forEach((function(e){var a=e.ID.includes(t.idlungroupValue);!0===a&&t.lungrouptableData.push(e)}))):this.lungrouptableData=this.copylungrouptableData)},queryhostgroup:function(){var t=this;"name"===this.hostgroupSearch?""!=this.namehostgroupValue?(this.hostgrouptableData=[],this.copyhostgrouptableData.forEach((function(e){var a=e.NAME.includes(t.namehostgroupValue);!0===a&&t.hostgrouptableData.push(e)}))):this.hostgrouptableData=this.copyhostgrouptableData:"id"===this.hostgroupSearch&&(""!=this.idhostgroupValue?(this.hostgrouptableData=[],this.copyhostgrouptableData.forEach((function(e){var a=e.ID.includes(t.idhostgroupValue);!0===a&&t.hostgrouptableData.push(e)}))):this.hostgrouptableData=this.copyhostgrouptableData)},queryportgroup:function(){var t=this;"name"===this.portgroupSearch?""!=this.nameportgroupValue?(this.portgrouptableData=[],this.copyportgrouptableData.forEach((function(e){var a=e.NAME.includes(t.nameportgroupValue);!0===a&&t.portgrouptableData.push(e)}))):this.portgrouptableData=this.copyportgrouptableData:"id"===this.portgroupSearch&&(""!=this.idportgroupValue?(this.portgrouptableData=[],this.copyportgrouptableData.forEach((function(e){var a=e.ID.includes(t.idportgroupValue);!0===a&&t.portgrouptableData.push(e)}))):this.portgrouptableData=this.copyportgrouptableData)},handleStepOPtions:function(){this.grouptableData=[],this.groupname="",this.selectmappingview.NAME&&("1"===this.activeIndex?this.getgroupList(256,this.selectmappingview.TYPE,this.selectmappingview.ID):"2"===this.activeIndex?this.getgroupList(14,this.selectmappingview.TYPE,this.selectmappingview.ID):"3"===this.activeIndex&&this.getgroupList(257,this.selectmappingview.TYPE,this.selectmappingview.ID))},selectmapping:function(t){this.selectmappingview=t,"1"===this.activeIndex?this.getgroupList(256,t.TYPE,t.ID):"2"===this.activeIndex?this.getgroupList(14,t.TYPE,t.ID):"3"===this.activeIndex&&this.getgroupList(257,t.TYPE,t.ID)},getgroupList:function(t,e,a){var r=this;this.$http.post("automation/api/storage/associate_mappingview/?TYPE=".concat(t,"&ASSOCIATEOBJTYPE=").concat(e,"&ASSOCIATEOBJID=").concat(a),{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(e){if(console.log(e,44444),e.data){r.groupInfo=e.data,r.groupname=r.groupInfo[0].NAME;var a=0;256===t?a=11:14===t&&(a=21),r.associate_group(a)}else r.groupname="",r.grouptableData=[]})).catch((function(t){console.log(33333),r.$message.error(JSON.stringify(t.response.data.msg)),r.grouptableData=[]}))},associate_group:function(t){var e=this;this.$http.post("automation/api/storage/associate_group/?TYPE=".concat(t,"&ASSOCIATEOBJTYPE=").concat(this.groupInfo[0].TYPE,"&ASSOCIATEOBJID=").concat(this.groupInfo[0].ID),{manage_address:this.storageresult.manage_address,manage_username:this.storageresult.manage_username,manage_password:this.storageresult.manage_password},{headers:{token:localStorage.getItem("token")}}).then((function(t){e.grouptableData=t.data}))},handlehostlunid:function(t){if(void 0!=t.ASSOCIATEMETADATA)return JSON.parse(t.ASSOCIATEMETADATA).HostLUNID},handlealloctype:function(t){return"0"==t.ALLOCTYPE?"thick LUN":"1"==t.ALLOCTYPE?"thin LUN":""},handleusagetype:function(t){return"0"==t.USAGETYPE?"内部":"1"==t.USAGETYPE?"外部":"3"==t.USAGETYPE?"PE LUN":""},handlecapacity:function(t){var e;e=t.CAPACITY;var a=512*e/1024/1024,r=a/1024;return r>=1?(r=r.toString().substring(0,r.toString().indexOf(".")+4),r=parseFloat(r).toFixed(3),r+" GB"):parseFloat(a).toFixed(3)+" MB"},handleoperationsystem:function(t){return"0"==t.OPERATIONSYSTEM?"Linux":"1"==t.OPERATIONSYSTEM?"Windows":"2"==t.OPERATIONSYSTEM?"Solaris":"3"==t.OPERATIONSYSTEM?"HP-UX":"4"==t.OPERATIONSYSTEM?"AIX":"5"==t.OPERATIONSYSTEM?"XenServer":"6"==t.OPERATIONSYSTEM?"Mac OS":"7"==t.OPERATIONSYSTEM?"VMware ESX":"8"==t.OPERATIONSYSTEM?"LINUX_VIS":"9"==t.OPERATIONSYSTEM?"Windows Server 2012":"10"==t.OPERATIONSYSTEM?"Oracle VM":"11"==t.OPERATIONSYSTEM?"OpenVMS":""}}},s=n,i=(a("47ae"),a("2877")),p=Object(i["a"])(s,r,o,!1,null,"dd768296",null);e["default"]=p.exports},1148:function(t,e,a){"use strict";var r=a("a691"),o=a("1d80");t.exports="".repeat||function(t){var e=String(o(this)),a="",l=r(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(e+=e))1&l&&(a+=e);return a}},"159b":function(t,e,a){var r=a("da84"),o=a("fdbc"),l=a("17c2"),n=a("9112");for(var s in o){var i=r[s],p=i&&i.prototype;if(p&&p.forEach!==l)try{n(p,"forEach",l)}catch(u){p.forEach=l}}},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7"),a("e6cf");function r(t,e,a,r,o,l,n){try{var s=t[l](n),i=s.value}catch(p){return void a(p)}s.done?e(i):Promise.resolve(i).then(r,o)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(o,l){var n=t.apply(e,a);function s(t){r(n,o,l,s,i,"next",t)}function i(t){r(n,o,l,s,i,"throw",t)}s(void 0)}))}}},"408a":function(t,e,a){var r=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"47ae":function(t,e,a){"use strict";var r=a("61c5"),o=a.n(r);o.a},"61c5":function(t,e,a){},"96cf":function(t,e,a){var r=function(t){"use strict";var e,a=Object.prototype,r=a.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",n=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(t,e,a,r){var o=e&&e.prototype instanceof m?e:m,l=Object.create(o.prototype),n=new A(r||[]);return l._invoke=_(t,a,n),l}function p(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(r){return{type:"throw",arg:r}}}t.wrap=i;var u="suspendedStart",c="suspendedYield",h="executing",g="completed",d={};function m(){}function f(){}function b(){}var v={};v[l]=function(){return this};var S=Object.getPrototypeOf,D=S&&S(S(k([])));D&&D!==a&&r.call(D,l)&&(v=D);var w=b.prototype=m.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function T(t,e){function a(o,l,n,s){var i=p(t[o],t,l);if("throw"!==i.type){var u=i.arg,c=u.value;return c&&"object"===typeof c&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){a("next",t,n,s)}),(function(t){a("throw",t,n,s)})):e.resolve(c).then((function(t){u.value=t,n(u)}),(function(t){return a("throw",t,n,s)}))}s(i.arg)}var o;function l(t,r){function l(){return new e((function(e,o){a(t,r,e,o)}))}return o=o?o.then(l,l):l()}this._invoke=l}function _(t,e,a){var r=u;return function(o,l){if(r===h)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw l;return P()}a.method=o,a.arg=l;while(1){var n=a.delegate;if(n){var s=E(n,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===u)throw r=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=h;var i=p(t,e,a);if("normal"===i.type){if(r=a.done?g:c,i.arg===d)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(r=g,a.method="throw",a.arg=i.arg)}}}function E(t,a){var r=t.iterator[a.method];if(r===e){if(a.delegate=null,"throw"===a.method){if(t.iterator["return"]&&(a.method="return",a.arg=e,E(t,a),"throw"===a.method))return d;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=p(r,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,d;var l=o.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,d):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,d)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function k(t){if(t){var a=t[l];if(a)return a.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function a(){while(++o<t.length)if(r.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return n.next=n}}return{next:P}}function P(){return{value:e,done:!0}}return f.prototype=w.constructor=b,b.constructor=f,b[s]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},y(T.prototype),T.prototype[n]=function(){return this},t.AsyncIterator=T,t.async=function(e,a,r,o,l){void 0===l&&(l=Promise);var n=new T(i(e,a,r,o),l);return t.isGeneratorFunction(a)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},y(w),w[s]="Generator",w[l]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){while(e.length){var r=e.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},t.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(r,o){return s.type="throw",s.arg=t,a.next=r,o&&(a.method="next",a.arg=e),!!o}for(var l=this.tryEntries.length-1;l>=0;--l){var n=this.tryEntries[l],s=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var i=r.call(n,"catchLoc"),p=r.call(n,"finallyLoc");if(i&&p){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(i){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=e&&e<=l.finallyLoc&&(l=null);var n=l?l.completion:{};return n.type=t,n.arg=e,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),I(a),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var o=r.arg;I(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:k(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},a434:function(t,e,a){"use strict";var r=a("23e7"),o=a("23cb"),l=a("a691"),n=a("50c4"),s=a("7b0b"),i=a("65f0"),p=a("8418"),u=a("1dde"),c=a("ae40"),h=u("splice"),g=c("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,m=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h||!g},{splice:function(t,e){var a,r,u,c,h,g,v=s(this),S=n(v.length),D=o(t,S),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=S-D):(a=w-2,r=m(d(l(e),0),S-D)),S+a-r>f)throw TypeError(b);for(u=i(v,r),c=0;c<r;c++)h=D+c,h in v&&p(u,c,v[h]);if(u.length=r,a<r){for(c=D;c<S-r;c++)h=c+r,g=c+a,h in v?v[g]=v[h]:delete v[g];for(c=S;c>S-r+a;c--)delete v[c-1]}else if(a>r)for(c=S-r;c>D;c--)h=c+r-1,g=c+a-1,h in v?v[g]=v[h]:delete v[g];for(c=0;c<a;c++)v[c+D]=arguments[c+2];return v.length=S-r+a,u}})},b680:function(t,e,a){"use strict";var r=a("23e7"),o=a("a691"),l=a("408a"),n=a("1148"),s=a("d039"),i=1..toFixed,p=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},c=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){i.call({})}));r({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,a,r,s,i=l(this),h=o(t),g=[0,0,0,0,0,0],d="",m="0",f=function(t,e){var a=-1,r=e;while(++a<6)r+=t*g[a],g[a]=r%1e7,r=p(r/1e7)},b=function(t){var e=6,a=0;while(--e>=0)a+=g[e],g[e]=p(a/t),a=a%t*1e7},v=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==g[t]){var a=String(g[t]);e=""===e?a:e+n.call("0",7-a.length)+a}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(d="-",i=-i),i>1e-21)if(e=c(i*u(2,69,1))-69,a=e<0?i*u(2,-e,1):i/u(2,e,1),a*=4503599627370496,e=52-e,e>0){f(0,a),r=h;while(r>=7)f(1e7,0),r-=7;f(u(10,r,1),0),r=e-1;while(r>=23)b(1<<23),r-=23;b(1<<r),f(1,1),b(2),m=v()}else f(0,a),f(1<<-e,0),m=v()+n.call("0",h);return h>0?(s=m.length,m=d+(s<=h?"0."+n.call("0",h-s)+m:m.slice(0,s-h)+"."+m.slice(s-h))):m=d+m,m}})}}]);