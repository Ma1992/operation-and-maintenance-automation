(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-368629e9","chunk-2d0aa9b6"],{1276:function(t,e,a){"use strict";var s=a("d784"),l=a("44e7"),n=a("825a"),o=a("1d80"),r=a("4840"),i=a("8aa5"),c=a("50c4"),p=a("14c3"),d=a("9263"),u=a("d039"),_=[].push,m=Math.min,v=4294967295,f=!u((function(){return!RegExp(v,"y")}));s("split",2,(function(t,e,a){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var s=String(o(this)),n=void 0===a?v:a>>>0;if(0===n)return[];if(void 0===t)return[s];if(!l(t))return e.call(s,t,n);var r,i,c,p=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,f=new RegExp(t.source,u+"g");while(r=d.call(f,s)){if(i=f.lastIndex,i>m&&(p.push(s.slice(m,r.index)),r.length>1&&r.index<s.length&&_.apply(p,r.slice(1)),c=r[0].length,m=i,p.length>=n))break;f.lastIndex===r.index&&f.lastIndex++}return m===s.length?!c&&f.test("")||p.push(""):p.push(s.slice(m)),p.length>n?p.slice(0,n):p}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var l=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,l,a):s.call(String(l),e,a)},function(t,l){var o=a(s,t,this,l,s!==e);if(o.done)return o.value;var d=n(t),u=String(this),_=r(d,RegExp),b=d.unicode,h=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"y":"g"),g=new _(f?d:"^(?:"+d.source+")",h),C=void 0===l?v:l>>>0;if(0===C)return[];if(0===u.length)return null===p(g,u)?[u]:[];var w=0,y=0,k=[];while(y<u.length){g.lastIndex=f?y:0;var S,N=p(g,f?u:u.slice(y));if(null===N||(S=m(c(g.lastIndex+(f?0:y)),u.length))===w)y=i(u,y,b);else{if(k.push(u.slice(w,y)),k.length===C)return k;for(var I=1;I<=N.length-1;I++)if(k.push(N[I]),k.length===C)return k;y=w=S}}return k.push(u.slice(w)),k}]}),!f)},"912c":function(t,e,a){"use strict";var s=a("be51"),l=a.n(s);l.a},be51:function(t,e,a){},d422:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"wrapper"},[a("el-row",{staticClass:"mlr10 mt10",attrs:{span:24}},[a("el-col",{attrs:{span:24}},[a("div",{},[a("el-row",{staticClass:"serve_select"},[a("el-form",{ref:"form",attrs:{"label-width":"70px"}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"IP","label-width":"50px"}},[a("el-select",{staticClass:"select_width",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入IP","remote-method":t.remoteMethod},on:{change:t.changeIp},model:{value:t.manageIp,callback:function(e){t.manageIp=e},expression:"manageIp"}},t._l(t.optionsNetworkIp,(function(t){return a("el-option",{key:t.id,attrs:{label:t.manage_ip,value:t.manage_ip+"/"+t.hostname}})})),1)],1)],1)],1)],1),a("el-row",{staticClass:"mt10"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top"},[a("div",[a("dl",{staticClass:"top_font_10 mlr10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.storageName))]),a("dd",[t._v("存储名称")])])])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top ml10"},[a("div",[a("dl",{staticClass:"top_font_10 mlr10 "},[a("dt",{staticClass:"time"},[t._v(t._s(t.manageIp))]),a("dd",[t._v("IP")])])])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top mlr10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v("STORAGE")]),a("dd",[t._v("网络设备类型")])])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.seriesName))]),a("dd",[t._v("系列名称")])])])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"network_top_top ml10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.vendorName))]),a("dd",[t._v("厂商")])])])])],1),a("el-row",{staticClass:"mt10"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top"},[a("div",[a("dl",{staticClass:"top_font_10 mlr10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.serialNumber))]),a("dd",[t._v("序列号")])])])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top ml10"},[a("div",[a("dl",{staticClass:"top_font_10 mlr10 "},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.totalCapacityMiB?(t.totalCapacityMiB/1024).toFixed(2):""))]),a("dd",[t._v("总容量(GB)")])])])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top mlr10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.freeCapacityMiB?(t.freeCapacityMiB/1024).toFixed(2):""))]),a("dd",[t._v("空闲容量(GB)")])])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"network_top_top"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.totalNodes))]),a("dd",[t._v("节点")])])])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"network_top_top ml10"},[a("dl",{staticClass:"top_font_10"},[a("dt",{staticClass:"serve_name"},[t._v(t._s(t.masterNode))]),a("dd",[t._v("主节点")])])])])],1)],1)])],1),a("el-row",{staticClass:"mt10 ml10 mlr10",attrs:{span:24}},[a("el-row",{staticClass:"mt10",attrs:{span:24}},[a("el-col",{staticClass:"table-content-box",attrs:{span:24}},[a("p",[t._v("主机")]),a("el-table",{staticClass:"table-content",attrs:{data:t.tableHostsData,border:"",height:"200px"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"os",label:"系统",align:"center"}}),a("el-table-column",{attrs:{prop:"FCPaths",label:"FCPaths",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleFCPaths(e.$index,e.row)}}},[t._v(" 详情 ")])]}}])})],1)],1)],1),a("el-row",{staticClass:"mt10",attrs:{span:24}},[a("el-col",{staticClass:"table-content-box",attrs:{span:24}},[a("p",[t._v("端口")]),a("el-table",{staticClass:"table-content",attrs:{data:t.tablePortsData,border:"",height:"200px"}},[a("el-table-column",{attrs:{prop:"portWWN",label:"WWN端口名称",align:"center"}}),a("el-table-column",{attrs:{prop:"nodeWWN",label:"WWN节点名称",align:"center"}}),a("el-table-column",{attrs:{prop:"linkState",label:"连接状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.linkState?a("span",[t._v("配置等待")]):3==e.row.linkState?a("span",[t._v("登录等待")]):4==e.row.linkState?a("span",[t._v("已连接")]):5==e.row.linkState?a("span",[t._v("连接失败")]):10==e.row.linkState?a("span",[t._v("离线")]):a("span",[t._v("连接异常")])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("span",[t._v("FC端口已连接到主机")]):2==e.row.type?a("span",[t._v("FC端口已连接到磁盘")]):3==e.row.type?a("span",[t._v("端口未连接")]):4==e.row.type?a("span",[t._v("iport输入模式")]):a("span",[t._v("未知状态")])]}}])}),a("el-table-column",{attrs:{prop:"mode",label:"mode",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.mode?a("span",[t._v("目标端口初始化")]):2==e.row.mode?a("span",[t._v("目标端口已连接")]):3==e.row.mode?a("span",[t._v("启动器端口已连接到磁盘")]):4==e.row.mode?a("span",[t._v("远程以太网复制端口")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"device",label:"设备信息",align:"center","show-overflow-tooltip":!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.row.device)},slot:"content"}),a("div",{staticClass:"lineCls"},[t._v(t._s(t.changeBr(e.row.device)))])])]}}])})],1)],1)],1),a("el-row",{staticClass:"mt10",attrs:{span:24}},[a("el-col",{staticClass:"table-content-box",attrs:{span:24}},[a("p",[t._v("VLUN")]),a("el-table",{staticClass:"table-content",attrs:{data:t.tableLunsData,border:"",height:"200px"}},[a("el-table-column",{attrs:{prop:"volumeName",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"hostname",label:"主机名",align:"center"}}),a("el-table-column",{attrs:{prop:"active",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.active?"活跃VLUN":"VLUN模板"))]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("span",[t._v("空")]):2==e.row.type?a("span",[t._v("端口")]):3==e.row.type?a("span",[t._v("主机")]):4==e.row.type?a("span",[t._v("匹配设置")]):5==e.row.type?a("span",[t._v("主机设置")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"remoteName",label:"远端主机名",align:"center"}}),a("el-table-column",{attrs:{prop:"portPos",label:"位置信息(节点_槽位_板卡号)",align:"center"}})],1)],1)],1),a("el-row",{staticClass:"mt10",attrs:{span:24}},[a("el-col",{staticClass:"table-content-box",attrs:{span:24}},[a("p",[t._v("VOLUME")]),a("el-table",{staticClass:"table-content",attrs:{data:t.tableVolumesData,border:"",height:"200px"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"sizeMiB",label:"内存(GB)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((e.row.sizeMiB/1024).toFixed(2)))]}}])}),a("el-table-column",{attrs:{prop:"usedMiB",label:"使用内存(GB)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((e.row.usedMiB/1024).toFixed(2)))]}}])}),a("el-table-column",{attrs:{prop:"freeMiB",label:"空闲内存(GB)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((e.row.freeMiB/1024).toFixed(2)))]}}])}),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.state?"正常":"不正常"))]}}])}),a("el-table-column",{attrs:{prop:"copyType",label:"copyType",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.copyType?a("span",[t._v("不复制")]):2==e.row.copyType?a("span",[t._v("全部复制")]):3==e.row.copyType?a("span",[t._v("快照复制")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"readOnly",label:"只读",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.readOnly?"否":"是"))]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"FCPaths",visible:t.FCPathsVisible,width:"50%"},on:{"update:visible":function(e){t.FCPathsVisible=e}}},[a("el-table",{staticClass:"table-content",attrs:{data:t.FCPathsData,border:"","max-height":"200px"}},[a("el-table-column",{attrs:{prop:"wwn",label:"wwn名称",align:"center"}}),a("el-table-column",{attrs:{prop:"portPos",label:"位置信息(节点_槽位_板卡号)",align:"center"}})],1)],1)],1)])},l=[],n=(a("d81d"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),{name:"ViewNetwork",components:{},data:function(){return{timer:null,optionsNetworkIp:[],storageName:"",manageIp:"",vendorName:"",seriesName:"",totalNodes:"",masterNode:"",serialNumber:"",totalCapacityMiB:"",freeCapacityMiB:"",tableHostsData:[],tablePortsData:[],tableVolumesData:[],tableLunsData:[],FCPathsVisible:!1,FCPathsData:[]}},computed:{},created:function(){},mounted:function(){var t=this,e=window.document.location.href,a=e.split("?");if(void 0==a[1])this.queryOneIp();else{var s=a[1].split("&"),l=s[0].split("=");this.manageIp=l[1],this.serveHistory()}this.timer=setInterval((function(){t.changeIp()}),3e5)},methods:{changeBr:function(t){if(t)return t.toString().replace(/<br\/>/g,"\n")},queryOneIp:function(){var t=this;this.$http.get("asset/api/storage/?current_page=1&pre_page=1&vendor=华三&is_monitor=是",{headers:{token:localStorage.getItem("token")}}).then((function(e){t.manageIp=e.data.data[0].manage_ip,t.storageName=e.data.data[0].storage_name,t.vendorName=e.data.data[0].vendor.vendor_name,t.seriesName=e.data.data[0].series.series_name,t.serveHistory()})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},serveHistory:function(){var t=this;this.$http.get("monitor/api/storageitem/monitor?storage_name=STORAGE_".concat(this.manageIp),{headers:{token:localStorage.getItem("token")}}).then((function(e){t.totalNodes="",t.serialNumber="",t.masterNode="",t.totalCapacityMiB="",t.freeCapacityMiB="",t.tableHostsData=[],t.tablePortsData=[],t.tableVolumesData=[],t.tableLunsData=[],t.totalNodes=e.data.SYSTEM.totalNodes,t.serialNumber=e.data.SYSTEM.serialNumber,t.masterNode=e.data.SYSTEM.masterNode,t.totalCapacityMiB=e.data.SYSTEM.totalCapacityMiB,t.freeCapacityMiB=e.data.SYSTEM.freeCapacityMiB,t.tableHostsData=e.data.HOSTS,t.tablePortsData=e.data.PORTS,t.tableVolumesData=e.data.VOLUMES,t.tableLunsData=e.data.VLUNS})).catch((function(e){t.$message.error(JSON.stringify(e.response.data))}))},handleFCPaths:function(t,e){this.FCPathsVisible=!0,this.FCPathsData=e.FCPaths},remoteMethod:function(t){var e=this;""!==t?this.$http.get("asset/api/storage/storage?vendor=华三&query=".concat(t,"&is_monitor=是"),{headers:{token:localStorage.getItem("token")}}).then((function(t){e.optionsNetworkIp=[],e.optionsNetworkIp=t.data.map((function(t){return t}))})).catch((function(t){e.$message.error(JSON.stringify(t.response.data))})):this.optionsNetworkIp=[]},changeIp:function(){this.manageIp=this.manageIp.split("/")[0],this.serveHistory()},Format:function(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var l=e.getDate();l=l<10?"0"+l:l;var n=e.getHours();n=n<10?"0"+n:n;var o=e.getMinutes();o=o<10?"0"+o:o;var r=e.getSeconds();return r=r<10?"0"+r:r,a+"-"+s+"-"+l+" "+n+":"+o+":"+r}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null}}),o=n,r=(a("912c"),a("2877")),i=Object(r["a"])(o,s,l,!1,null,"11cbc4fe",null);e["default"]=i.exports},d81d:function(t,e,a){"use strict";var s=a("23e7"),l=a("b727").map,n=a("1dde"),o=a("ae40"),r=n("map"),i=o("map");s({target:"Array",proto:!0,forced:!r||!i},{map:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);